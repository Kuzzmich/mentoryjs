# 3.1.6 –§—É–Ω–∫—Ü–∏–∏ —Å —Ç–∏–ø–∞–º–∏

–§—É–Ω–∫—Ü–∏–∏ ‚Äî –æ—Å–Ω–æ–≤–∞ –ª—é–±–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã. TypeScript –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ.

---

## üéØ –ß—Ç–æ —Ç—ã —É–∑–Ω–∞–µ—à—å

- –¢–∏–ø–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
- Optional –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`?`)
- Default –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- Rest –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`...`)
- Function types (—Ç–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏)
- Callback —Ñ—É–Ω–∫—Ü–∏–∏ —Å —Ç–∏–ø–∞–º–∏
- –°—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π (function overloads)
- `void` –∏ `never` –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö

---

## üìù –ë–∞–∑–æ–≤–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤–æ–∑–≤—Ä–∞—Ç

```typescript
function greet(name: string): string {
  return `–ü—Ä–∏–≤–µ—Ç, ${name}!`;
}

const message = greet("–ò–≤–∞–Ω");  // –¢–∏–ø: string
```

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```typescript
function –∏–º—è(–ø–∞—Ä–∞–º–µ—Ç—Ä: —Ç–∏–ø): —Ç–∏–ø–í–æ–∑–≤—Ä–∞—Ç–∞ {
  // —Ç–µ–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏
}
```

---

### –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```typescript
function calculateTemp(
  celsius: number,
  decimals: number
): string {
  return celsius.toFixed(decimals) + "¬∞C";
}

calculateTemp(20.5678, 2);  // "20.57¬∞C"
```

---

### –§—É–Ω–∫—Ü–∏–∏ –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞ (void)

```typescript
function logWeather(city: string, temp: number): void {
  console.log(`${city}: ${temp}¬∞C`);
  // –ù–µ—Ç return –∏–ª–∏ return –±–µ–∑ –∑–Ω–∞—á–µ–Ω–∏—è
}
```

> üí° `void` –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ. –ú–æ–∂–Ω–æ —è–≤–Ω–æ –≤–µ—Ä–Ω—É—Ç—å `undefined` –∏–ª–∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–∏—á–µ–≥–æ.

---

## ‚ùì Optional –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

–ü–∞—Ä–∞–º–µ—Ç—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º:

```typescript
function getWeather(city: string, includeHumidity?: boolean): string {
  if (includeHumidity) {
    return `${city}: 20¬∞C, –≤–ª–∞–∂–Ω–æ—Å—Ç—å 65%`;
  }
  return `${city}: 20¬∞C`;
}

getWeather("–ú–æ—Å–∫–≤–∞");           // ‚úÖ –ë–µ–∑ humidity
getWeather("–ö–∞–∑–∞–Ω—å", true);     // ‚úÖ –° humidity
```

**–í–∞–∂–Ω–æ:**
- Optional –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è `?`
- –í–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–∏–ø –±—É–¥–µ—Ç `boolean | undefined`
- Optional –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–ø–æ—Å–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö**

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞ optional –ø–∞—Ä–∞–º–µ—Ç—Ä–∞

```typescript
function formatTemp(temp: number, unit?: string): string {
  // unit –∏–º–µ–µ—Ç —Ç–∏–ø: string | undefined

  if (unit === "F") {
    return `${(temp * 9/5) + 32}¬∞F`;
  }

  // –ï—Å–ª–∏ unit –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω –∏–ª–∏ –Ω–µ "F"
  return `${temp}¬∞C`;
}

formatTemp(20);         // "20¬∞C"
formatTemp(20, "F");    // "68¬∞F"
formatTemp(20, "C");    // "20¬∞C"
```

---

## üé® Default –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

–ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```typescript
function getWeather(city: string, unit: string = "celsius"): string {
  return `${city}: 20¬∞ (${unit})`;
}

getWeather("–ú–æ—Å–∫–≤–∞");              // unit = "celsius"
getWeather("–ö–∞–∑–∞–Ω—å", "fahrenheit"); // unit = "fahrenheit"
```

**–û—Ç–ª–∏—á–∏–µ –æ—Ç optional:**
- Optional: `unit?: string` ‚Üí —Ç–∏–ø `string | undefined`
- Default: `unit: string = "celsius"` ‚Üí —Ç–∏–ø `string`

---

### Default + union —Ç–∏–ø—ã

```typescript
type Unit = "celsius" | "fahrenheit";

function convertTemp(
  temp: number,
  from: Unit = "celsius",
  to: Unit = "fahrenheit"
): number {
  if (from === to) return temp;

  if (from === "celsius") {
    return (temp * 9/5) + 32;
  }
  return (temp - 32) * 5/9;
}

convertTemp(20);                    // 20¬∞C ‚Üí ¬∞F
convertTemp(68, "fahrenheit");      // 68¬∞F ‚Üí ¬∞C
```

---

## üì¶ Rest –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

–°–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ –º–∞—Å—Å–∏–≤:

```typescript
function getAvgTemp(...temperatures: number[]): number {
  const sum = temperatures.reduce((acc, temp) => acc + temp, 0);
  return sum / temperatures.length;
}

getAvgTemp(20, 18, 22);          // 20
getAvgTemp(15, 17, 19, 21, 23);  // 19
```

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```typescript
function –∏–º—è(...–ø–∞—Ä–∞–º–µ—Ç—Ä: —Ç–∏–ø[]): –≤–æ–∑–≤—Ä–∞—Ç {
  // –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî —ç—Ç–æ –º–∞—Å—Å–∏–≤
}
```

---

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```typescript
function logTemperatures(
  city: string,           // –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π
  unit: string = "¬∞C",    // Default
  ...temps: number[]      // Rest (–≤—Å–µ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π!)
): void {
  console.log(`${city}:`);
  temps.forEach(temp => {
    console.log(`  ${temp}${unit}`);
  });
}

logTemperatures("–ú–æ—Å–∫–≤–∞", "¬∞C", 20, 18, 22);
// –ú–æ—Å–∫–≤–∞:
//   20¬∞C
//   18¬∞C
//   22¬∞C
```

> ‚ö†Ô∏è **–ü–æ—Ä—è–¥–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ ‚Üí default ‚Üí optional ‚Üí rest

---

## üîó Function Types

–ú–æ–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å —Ç–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ:

```typescript
// –¢–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏
type Formatter = (value: number) => string;

// –§—É–Ω–∫—Ü–∏–∏ —Å —ç—Ç–∏–º —Ç–∏–ø–æ–º
const toFixed: Formatter = (value) => value.toFixed(2);
const toCelsius: Formatter = (value) => `${value}¬∞C`;

function format(temp: number, formatter: Formatter): string {
  return formatter(temp);
}

format(20.567, toFixed);     // "20.57"
format(20, toCelsius);       // "20¬∞C"
```

---

### Function type –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ

```typescript
function fetchData(
  url: string,
  onSuccess: (data: any) => void,
  onError: (error: string) => void
): void {
  fetch(url)
    .then(response => response.json())
    .then(data => onSuccess(data))
    .catch(error => onError(error.message));
}

fetchData(
  "/api/weather",
  (data) => console.log("–£—Å–ø–µ—Ö:", data),
  (error) => console.log("–û—à–∏–±–∫–∞:", error)
);
```

---

## ‚û°Ô∏è –°—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

–°—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–∏–ø–∏–∑–∏—Ä—É—é—Ç—Å—è —Ç–∞–∫ –∂–µ:

```typescript
const add = (a: number, b: number): number => {
  return a + b;
};

// –ö—Ä–∞—Ç–∫–∞—è —Ñ–æ—Ä–º–∞ (–±–µ–∑ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫)
const multiply = (a: number, b: number): number => a * b;

// –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
const getTimestamp = (): number => Date.now();

// –û–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä (—Å–∫–æ–±–∫–∏ –º–æ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç—å)
const double = (n: number): number => n * 2;
```

---

### –°—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```typescript
function processTemps(
  temps: number[],
  transform: (temp: number) => number
): number[] {
  return temps.map(transform);
}

const temps = [20, 18, 22];

// –ü–µ—Ä–µ–¥–∞—ë–º —Å—Ç—Ä–µ–ª–æ—á–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
const fahrenheit = processTemps(temps, (t) => (t * 9/5) + 32);
// [68, 64.4, 71.6]
```

---

## üé≠ Callback —Ñ—É–Ω–∫—Ü–∏–∏

Callback ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä:

```typescript
function loadWeather(
  city: string,
  onComplete: (temp: number) => void
): void {
  setTimeout(() => {
    const temp = Math.random() * 30;
    onComplete(temp);
  }, 1000);
}

loadWeather("–ú–æ—Å–∫–≤–∞", (temp) => {
  console.log(`–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${temp.toFixed(1)}¬∞C`);
});
```

---

### Callback —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```typescript
type WeatherCallback = (
  city: string,
  temp: number,
  error: string | null
) => void;

function fetchWeather(city: string, callback: WeatherCallback): void {
  setTimeout(() => {
    if (Math.random() > 0.8) {
      callback(city, 0, "–û—à–∏–±–∫–∞ —Å–µ—Ç–∏");
    } else {
      callback(city, 20, null);
    }
  }, 1000);
}

fetchWeather("–ö–∞–∑–∞–Ω—å", (city, temp, error) => {
  if (error) {
    console.log(`–û—à–∏–±–∫–∞ –¥–ª—è ${city}: ${error}`);
  } else {
    console.log(`${city}: ${temp}¬∞C`);
  }
});
```

---

## üîÑ –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π

–§—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –∏–º–µ—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞—Ç—É—Ä**:

```typescript
// –°–∏–≥–Ω–∞—Ç—É—Ä—ã (–æ–±—ä—è–≤–ª–µ–Ω–∏—è)
function formatTemp(temp: number): string;
function formatTemp(temp: number, decimals: number): string;
function formatTemp(temp: number, unit: string): string;
function formatTemp(temp: number, unit: string, decimals: number): string;

// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–æ–¥–Ω–∞!)
function formatTemp(
  temp: number,
  arg2?: number | string,
  arg3?: number
): string {
  let decimals = 1;
  let unit = "¬∞C";

  if (typeof arg2 === "number") {
    decimals = arg2;
  } else if (typeof arg2 === "string") {
    unit = arg2;
    if (arg3 !== undefined) {
      decimals = arg3;
    }
  }

  return `${temp.toFixed(decimals)}${unit}`;
}

// –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç:
formatTemp(20);              // "20.0¬∞C"
formatTemp(20, 2);           // "20.00¬∞C"
formatTemp(20, "¬∞F");        // "20.0¬∞F"
formatTemp(20, "¬∞F", 2);     // "20.00¬∞F"
```

**–í–∞–∂–Ω–æ:**
- –°–∏–≥–Ω–∞—Ç—É—Ä—ã –æ–ø–∏—Å—ã–≤–∞—é—Ç **—Ä–∞–∑–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –≤—ã–∑–æ–≤–∞**
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è **–æ–¥–Ω–∞** –∏ –¥–æ–ª–∂–Ω–∞ –ø–æ–∫—Ä—ã–≤–∞—Ç—å –≤—Å–µ —Å–ª—É—á–∞–∏
- TypeScript –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â—É—é —Å–∏–≥–Ω–∞—Ç—É—Ä—É –ø—Ä–∏ –≤—ã–∑–æ–≤–µ

---

### –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤–æ–∑–≤—Ä–∞—Ç–∞

```typescript
function getWeatherData(city: string): string;
function getWeatherData(city: string, detailed: true): {
  city: string;
  temp: number;
  humidity: number;
};

function getWeatherData(
  city: string,
  detailed?: boolean
): string | { city: string; temp: number; humidity: number } {
  const data = {
    city,
    temp: 20,
    humidity: 65
  };

  if (detailed) {
    return data;
  }

  return `${city}: ${data.temp}¬∞C`;
}

const simple = getWeatherData("–ú–æ—Å–∫–≤–∞");
// –¢–∏–ø: string

const full = getWeatherData("–ö–∞–∑–∞–Ω—å", true);
// –¢–∏–ø: { city: string; temp: number; humidity: number }
```

---

## ‚ö° Never –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö

–§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `never`, –µ—Å–ª–∏ **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è**:

```typescript
function throwError(message: string): never {
  throw new Error(message);
  // –ö–æ–¥ —Å—é–¥–∞ –Ω–µ –¥–æ–π–¥—ë—Ç
}

function infiniteLoop(): never {
  while (true) {
    // –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
  }
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```typescript
function processWeather(data: unknown): number {
  if (typeof data !== "object" || data === null) {
    throwError("Invalid data");  // never ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –≤–µ—Ä–Ω—ë—Ç—Å—è
  }

  // TypeScript –∑–Ω–∞–µ—Ç —á—Ç–æ data ‚Äî —ç—Ç–æ object
  return (data as any).temperature;
}
```

---

## üîß –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.1.6.1: Utility —Ñ—É–Ω–∫—Ü–∏–∏ —Å —Ç–∏–ø–∞–º–∏

–°–æ–∑–¥–∞–¥–∏–º –º–æ–¥—É–ª—å —Å —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

### –®–∞–≥ 0: –°–æ–∑–¥–∞–π –º–æ–¥—É–ª—å utils

–°–æ–∑–¥–∞–π `src/modules/utils/format.ts`:

```typescript
// src/modules/utils/format.ts

export function formatTemperature(temp, decimals) {
  return `${temp.toFixed(decimals)}¬∞C`;
}

export function formatDate(timestamp) {
  const date = new Date(timestamp);
  return date.toLocaleString("ru-RU");
}

export function formatWindSpeed(speed, unit) {
  if (unit === "kmh") {
    return `${(speed * 3.6).toFixed(1)} –∫–º/—á`;
  }
  return `${speed.toFixed(1)} –º/—Å`;
}

export function capitalizeCity(city) {
  return city.charAt(0).toUpperCase() + city.slice(1).toLowerCase();
}

export function truncateDescription(description, maxLength) {
  if (description.length <= maxLength) {
    return description;
  }
  return description.slice(0, maxLength) + "...";
}
```

---

### –ó–∞–¥–∞–Ω–∏—è

**1. –¢–∏–ø–∏–∑–∏—Ä—É–π `formatTemperature`:**
   - `temp` ‚Äî —á–∏—Å–ª–æ
   - `decimals` ‚Äî —á–∏—Å–ª–æ
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É

**2. –¢–∏–ø–∏–∑–∏—Ä—É–π `formatDate`:**
   - `timestamp` ‚Äî —á–∏—Å–ª–æ (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É

**3. –¢–∏–ø–∏–∑–∏—Ä—É–π `formatWindSpeed` —Å default –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º:**
   - `speed` ‚Äî —á–∏—Å–ª–æ (–º/—Å)
   - `unit` ‚Äî –º–æ–∂–µ—Ç –±—ã—Ç—å "ms" –∏–ª–∏ "kmh", –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "ms"
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É

**4. –¢–∏–ø–∏–∑–∏—Ä—É–π `capitalizeCity`:**
   - `city` ‚Äî —Å—Ç—Ä–æ–∫–∞
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É

**5. –¢–∏–ø–∏–∑–∏—Ä—É–π `truncateDescription` —Å optional –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º:**
   - `description` ‚Äî —Å—Ç—Ä–æ–∫–∞
   - `maxLength` ‚Äî —á–∏—Å–ª–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî –Ω–µ –æ–±—Ä–µ–∑–∞—Ç—å)
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É

**6. –°–æ–∑–¥–∞–π type alias –¥–ª—è –µ–¥–∏–Ω–∏—Ü —Å–∫–æ—Ä–æ—Å—Ç–∏:**
   - `WindSpeedUnit` = "ms" –∏–ª–∏ "kmh"
   - –ò—Å–ø–æ–ª—å–∑—É–π –≤ `formatWindSpeed`

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞

```typescript
// src/test-format.ts
import {
  formatTemperature,
  formatDate,
  formatWindSpeed,
  capitalizeCity,
  truncateDescription
} from './modules/utils/format.js';

console.log(formatTemperature(20.567, 2));        // "20.57¬∞C"
console.log(formatDate(Date.now()));              // "13.02.2026, 10:30:45"
console.log(formatWindSpeed(5));                  // "5.0 –º/—Å"
console.log(formatWindSpeed(5, "kmh"));           // "18.0 –∫–º/—á"
console.log(capitalizeCity("–º–û—Å–ö–≤–ê"));            // "–ú–æ—Å–∫–≤–∞"
console.log(truncateDescription("–°–æ–ª–Ω–µ—á–Ω–æ", 20)); // "–°–æ–ª–Ω–µ—á–Ω–æ"
console.log(truncateDescription("–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å", 10)); // "–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è..."
```

```bash
npm run build && node dist/test-format.js
```

---

### üí° –ï—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</summary>

```typescript
export function formatTemperature(temp: number, decimals: number): string {
  return `${temp.toFixed(decimals)}¬∞C`;
}

export function formatDate(timestamp: number): string {
  const date = new Date(timestamp);
  return date.toLocaleString("ru-RU");
}

export function capitalizeCity(city: string): string {
  return city.charAt(0).toUpperCase() + city.slice(1).toLowerCase();
}
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: WindSpeedUnit –∏ default –ø–∞—Ä–∞–º–µ—Ç—Ä</summary>

```typescript
type WindSpeedUnit = "ms" | "kmh";

export function formatWindSpeed(
  speed: number,
  unit: WindSpeedUnit = "ms"
): string {
  if (unit === "kmh") {
    return `${(speed * 3.6).toFixed(1)} –∫–º/—á`;
  }
  return `${speed.toFixed(1)} –º/—Å`;
}
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: truncateDescription —Å optional</summary>

```typescript
export function truncateDescription(
  description: string,
  maxLength?: number
): string {
  if (maxLength === undefined || description.length <= maxLength) {
    return description;
  }
  return description.slice(0, maxLength) + "...";
}
```
</details>

---

## üîß –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.1.6.2: –§—É–Ω–∫—Ü–∏–∏ —Å callback

–°–æ–∑–¥–∞–¥–∏–º –º–æ–¥—É–ª—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å callback —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

### –®–∞–≥ 0: –°–æ–∑–¥–∞–π –º–æ–¥—É–ª—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–°–æ–∑–¥–∞–π `src/modules/utils/validation.ts`:

```typescript
// src/modules/utils/validation.ts

export function validateCity(city, onValid, onInvalid) {
  const trimmed = city.trim();

  if (trimmed.length === 0) {
    onInvalid("–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");
    return;
  }

  if (trimmed.length < 2) {
    onInvalid("–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞)");
    return;
  }

  if (!/^[–∞-—è–ê-–Ø—ë–Åa-zA-Z\s-]+$/.test(trimmed)) {
    onInvalid("–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã");
    return;
  }

  onValid(trimmed);
}

export function validateTemperature(temp, onValid, onInvalid) {
  if (temp < -90) {
    onInvalid("–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∞—è (–º–∏–Ω–∏–º—É–º -90¬∞C)");
    return;
  }

  if (temp > 60) {
    onInvalid("–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∞—è (–º–∞–∫—Å–∏–º—É–º +60¬∞C)");
    return;
  }

  onValid(temp);
}

export function processAsync(
  value,
  validator,
  onComplete
) {
  setTimeout(() => {
    const isValid = validator(value);
    onComplete(isValid, isValid ? "–£—Å–ø–µ—Ö" : "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏");
  }, 100);
}
```

---

### –ó–∞–¥–∞–Ω–∏—è

**1. –¢–∏–ø–∏–∑–∏—Ä—É–π callback —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è `validateCity`:**
   - `city` ‚Äî —Å—Ç—Ä–æ–∫–∞
   - `onValid` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–æ—Ä–æ–¥ (—Å—Ç—Ä–æ–∫–∞), –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
   - `onInvalid` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (—Å—Ç—Ä–æ–∫–∞), –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç

**2. –¢–∏–ø–∏–∑–∏—Ä—É–π callback —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è `validateTemperature`:**
   - `temp` ‚Äî —á–∏—Å–ª–æ
   - `onValid` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É (—á–∏—Å–ª–æ), –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
   - `onInvalid` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (—Å—Ç—Ä–æ–∫–∞), –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç

**3. –°–æ–∑–¥–∞–π type aliases –¥–ª—è callback —Ñ—É–Ω–∫—Ü–∏–π:**
   - `CityValidationCallback` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É (–≥–æ—Ä–æ–¥), –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
   - `TemperatureValidationCallback` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —á–∏—Å–ª–æ (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞), –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
   - `ValidationErrorCallback` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É (–æ—à–∏–±–∫–∞), –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç

**4. –¢–∏–ø–∏–∑–∏—Ä—É–π `processAsync`:**
   - `value` ‚Äî –ª—é–±–æ–π —Ç–∏–ø (unknown)
   - `validator` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç unknown, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç boolean
   - `onComplete` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç boolean –∏ —Å—Ç—Ä–æ–∫—É, –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞

```typescript
// src/test-validation.ts
import { validateCity, validateTemperature } from './modules/utils/validation.js';

console.log("=== –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥–æ—Ä–æ–¥–∞ ===");

validateCity(
  "–ú–æ—Å–∫–≤–∞",
  (city) => console.log(`‚úÖ –í–∞–ª–∏–¥–Ω—ã–π –≥–æ—Ä–æ–¥: ${city}`),
  (error) => console.log(`‚ùå –û—à–∏–±–∫–∞: ${error}`)
);

validateCity(
  "–ú",
  (city) => console.log(`‚úÖ –í–∞–ª–∏–¥–Ω—ã–π –≥–æ—Ä–æ–¥: ${city}`),
  (error) => console.log(`‚ùå –û—à–∏–±–∫–∞: ${error}`)
);

console.log("\n=== –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã ===");

validateTemperature(
  20,
  (temp) => console.log(`‚úÖ –í–∞–ª–∏–¥–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${temp}¬∞C`),
  (error) => console.log(`‚ùå –û—à–∏–±–∫–∞: ${error}`)
);

validateTemperature(
  -100,
  (temp) => console.log(`‚úÖ –í–∞–ª–∏–¥–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${temp}¬∞C`),
  (error) => console.log(`‚ùå –û—à–∏–±–∫–∞: ${error}`)
);
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
=== –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥–æ—Ä–æ–¥–∞ ===
‚úÖ –í–∞–ª–∏–¥–Ω—ã–π –≥–æ—Ä–æ–¥: –ú–æ—Å–∫–≤–∞
‚ùå –û—à–∏–±–∫–∞: –ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞)

=== –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã ===
‚úÖ –í–∞–ª–∏–¥–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 20¬∞C
‚ùå –û—à–∏–±–∫–∞: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∞—è (–º–∏–Ω–∏–º—É–º -90¬∞C)
```

---

### üí° –ï—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: type aliases –¥–ª—è callbacks</summary>

```typescript
type CityValidationCallback = (city: string) => void;
type TemperatureValidationCallback = (temp: number) => void;
type ValidationErrorCallback = (error: string) => void;
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: validateCity</summary>

```typescript
export function validateCity(
  city: string,
  onValid: CityValidationCallback,
  onInvalid: ValidationErrorCallback
): void {
  const trimmed = city.trim();

  if (trimmed.length === 0) {
    onInvalid("–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");
    return;
  }

  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

  onValid(trimmed);
}
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: processAsync</summary>

```typescript
export function processAsync(
  value: unknown,
  validator: (val: unknown) => boolean,
  onComplete: (isValid: boolean, message: string) => void
): void {
  setTimeout(() => {
    const isValid = validator(value);
    onComplete(isValid, isValid ? "–£—Å–ø–µ—Ö" : "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏");
  }, 100);
}
```
</details>

---

## üîß –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.1.6.3: –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä —Å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–æ–π

–°–æ–∑–¥–∞–¥–∏–º —Ñ—É–Ω–∫—Ü–∏—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –≤—ã–∑–æ–≤–∞.

### –®–∞–≥ 0: –°–æ–∑–¥–∞–π –º–æ–¥—É–ª—å –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞

–°–æ–∑–¥–∞–π `src/modules/utils/converter.ts`:

```typescript
// src/modules/utils/converter.ts

// –ó–¥–µ—Å—å –±—É–¥—É—Ç —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫

// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
export function convertTemperature(temp, from, to) {
  if (from === to) {
    return temp;
  }

  if (from === "C" && to === "F") {
    return (temp * 9/5) + 32;
  }

  if (from === "F" && to === "C") {
    return (temp - 32) * 5/9;
  }

  if (from === "C" && to === "K") {
    return temp + 273.15;
  }

  if (from === "K" && to === "C") {
    return temp - 273.15;
  }

  if (from === "F" && to === "K") {
    return ((temp - 32) * 5/9) + 273.15;
  }

  if (from === "K" && to === "F") {
    return ((temp - 273.15) * 9/5) + 32;
  }

  return temp;
}
```

---

### –ó–∞–¥–∞–Ω–∏—è

**1. –°–æ–∑–¥–∞–π type alias –¥–ª—è –µ–¥–∏–Ω–∏—Ü:**
   - `TemperatureUnit` = "C" | "F" | "K"

**2. –î–æ–±–∞–≤—å —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫ (–ø–µ—Ä–µ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π):**
   - –í–∞—Ä–∏–∞–Ω—Ç 1: `(temp: number, from: TemperatureUnit, to: TemperatureUnit) => number`
   - –í–∞—Ä–∏–∞–Ω—Ç 2: `(temp: number, from: TemperatureUnit) => number` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑ from –≤ –¶–µ–ª—å—Å–∏–∏ (to = "C")
   - –í–∞—Ä–∏–∞–Ω—Ç 3: `(temp: number) => number` ‚Äî –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç —á—Ç–æ temp –≤ –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞—Ö, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ –¶–µ–ª—å—Å–∏–∏

**3. –¢–∏–ø–∏–∑–∏—Ä—É–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é:**
   - –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å optional (–∫—Ä–æ–º–µ temp)
   - –ò—Å–ø–æ–ª—å–∑—É–π default –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è from –∏ to
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á–∏—Å–ª–æ

**4. –°–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞:**
   - `formatConversion(temp, from, to)` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É —Ç–∏–ø–∞ "20¬∞C = 68¬∞F"
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `convertTemperature` –≤–Ω—É—Ç—Ä–∏
   - –¢–∏–ø–∏–∑–∏—Ä—É–π –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞

```typescript
// src/test-converter.ts
import { convertTemperature } from './modules/utils/converter.js';

console.log("=== –¢–µ—Å—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫ ===");

// –ü–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞
console.log(convertTemperature(20, "C", "F"));     // 68

// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –¶–µ–ª—å—Å–∏–∏
console.log(convertTemperature(68, "F"));          // 20

// –§–∞—Ä–µ–Ω–≥–µ–π—Ç—ã ‚Üí –¶–µ–ª—å—Å–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
console.log(convertTemperature(68));               // 20

// –ö–µ–ª—å–≤–∏–Ω—ã
console.log(convertTemperature(293.15, "K", "C")); // 20
console.log(convertTemperature(0, "C", "K"));       // 273.15
```

---

### üí° –ï—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: —Ç–∏–ø –∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã</summary>

```typescript
type TemperatureUnit = "C" | "F" | "K";

// –°–∏–≥–Ω–∞—Ç—É—Ä—ã –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫
export function convertTemperature(
  temp: number,
  from: TemperatureUnit,
  to: TemperatureUnit
): number;

export function convertTemperature(
  temp: number,
  from: TemperatureUnit
): number;

export function convertTemperature(temp: number): number;

// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
export function convertTemperature(
  temp: number,
  from: TemperatureUnit = "F",
  to: TemperatureUnit = "C"
): number {
  // ... —Ç–≤–æ–π –∫–æ–¥
}
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: formatConversion</summary>

```typescript
export function formatConversion(
  temp: number,
  from: TemperatureUnit,
  to: TemperatureUnit
): string {
  const result = convertTemperature(temp, from, to);
  return `${temp}¬∞${from} = ${result.toFixed(2)}¬∞${to}`;
}
```
</details>

---

## üîß –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.1.6.4: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

–¢–∏–ø–∏–∑–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è UI –ø–æ–≥–æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –®–∞–≥ 0: –°–æ–∑–¥–∞–π –º–æ–¥—É–ª—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–°–æ–∑–¥–∞–π `src/modules/ui/handlers.ts`:

```typescript
// src/modules/ui/handlers.ts
import { fetchWeather } from '../api/weather.js';

export function setupEventHandlers() {
  const searchBtn = document.getElementById("search-btn");
  const cityInput = document.getElementById("city-input");
  const unitToggle = document.getElementById("unit-toggle");

  if (searchBtn) {
    searchBtn.addEventListener("click", handleSearch);
  }

  if (cityInput) {
    cityInput.addEventListener("keypress", handleKeyPress);
  }

  if (unitToggle) {
    unitToggle.addEventListener("click", handleUnitToggle);
  }
}

function handleSearch(event) {
  const input = document.getElementById("city-input");
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞
}

function handleKeyPress(event) {
  if (event.key === "Enter") {
    // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞
  }
}

function handleUnitToggle(event) {
  // ... –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü
}
```

---

### –ó–∞–¥–∞–Ω–∏—è

**1. –¢–∏–ø–∏–∑–∏—Ä—É–π –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
   - `handleSearch` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ —Ç–∏–ø–∞ `MouseEvent`
   - `handleKeyPress` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ —Ç–∏–ø–∞ `KeyboardEvent`
   - `handleUnitToggle` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ —Ç–∏–ø–∞ `MouseEvent`
   - –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç (void)

**2. –¢–∏–ø–∏–∑–∏—Ä—É–π —ç–ª–µ–º–µ–Ω—Ç—ã DOM:**
   - `cityInput` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∏–ø–∞ `HTMLInputElement | null`
   - –ò—Å–ø–æ–ª—å–∑—É–π type assertion –∫–æ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—à—å –∑–Ω–∞—á–µ–Ω–∏–µ: `(element as HTMLInputElement).value`

**3. –¢–∏–ø–∏–∑–∏—Ä—É–π —Ñ—É–Ω–∫—Ü–∏—é `createDebounced`:**
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é: `(value: string) => void` –∏ –∑–∞–¥–µ—Ä–∂–∫—É: `number`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é —Å —Ç–∞–∫–æ–π –∂–µ —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π: `(value: string) => void`
   - –í–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `setTimeout` –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞

**5. –î–æ–±–∞–≤—å –≤ handleSearch:**
   - –ü–æ–ª—É—á–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ input
   - –í–∞–ª–∏–¥–∏—Ä—É–π —á—Ç–æ –æ–Ω–æ –Ω–µ –ø—É—Å—Ç–æ–µ
   - –í—ã–∑–æ–≤–∏ `fetchWeather` —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –≥–æ—Ä–æ–¥–∞
   - –û–±—Ä–∞–±–æ—Ç–∞–π –æ—Ç–≤–µ—Ç (success –∏–ª–∏ error)

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞

–§—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```bash
npm run dev
```

–û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å:
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ Enter –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è

---

### üí° –ï—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: —Ç–∏–ø–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</summary>

```typescript
function handleSearch(event: MouseEvent): void {
  const input = document.getElementById("city-input") as HTMLInputElement;

  if (!input) return;

  const city = input.value.trim();

  if (city) {
    // –í—ã–∑–æ–≤ fetchWeather
  }
}

function handleKeyPress(event: KeyboardEvent): void {
  if (event.key === "Enter") {
    const searchBtn = document.getElementById("search-btn");
    searchBtn?.click();
  }
}
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: createDebounced</summary>

```typescript
function createDebounced(
  fn: (value: string) => void,
  delay: number
): (value: string) => void {
  let timeoutId: number | undefined;

  return (value: string) => {
    if (timeoutId) {
      clearTimeout(timeoutId);
    }

    timeoutId = setTimeout(() => {
      fn(value);
    }, delay);
  };
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const debouncedSearch = createDebounced(
  (city: string) => fetchWeather(city),
  300
);
```
</details>

---

## üîß –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.1.6.5: –ò—Ç–æ–≥–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

–û–±—ä–µ–¥–∏–Ω–∏–º –≤—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ –≤ –µ–¥–∏–Ω–æ–µ –ø–æ–≥–æ–¥–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–ª–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π.

### –®–∞–≥ 0: –û–±–Ω–æ–≤–∏ HTML

–ó–∞–º–µ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `index.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ü–æ–≥–æ–¥–∞ —Å TypeScript</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container {
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 30px;
      font-size: 28px;
    }

    .search-box {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    input {
      flex: 1;
      padding: 12px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 16px;
      transition: border-color 0.3s;
    }

    input:focus {
      outline: none;
      border-color: #667eea;
    }

    button {
      padding: 12px 20px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      transition: background 0.3s;
    }

    button:hover {
      background: #5568d3;
    }

    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .unit-toggle {
      padding: 8px 15px;
      background: #f5f5f5;
      color: #333;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
    }

    .unit-toggle:hover {
      background: #e0e0e0;
    }

    .cache-stats {
      flex: 1;
      padding: 8px 15px;
      background: #f5f5f5;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      color: #666;
      text-align: center;
    }

    #weather {
      min-height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .weather-card {
      text-align: center;
      width: 100%;
    }

    .weather-card h2 {
      font-size: 32px;
      margin-bottom: 15px;
      color: #333;
    }

    .temperature {
      font-size: 64px;
      font-weight: bold;
      color: #667eea;
      margin-bottom: 10px;
    }

    .description {
      font-size: 20px;
      color: #666;
      margin-bottom: 20px;
    }

    .details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid #e0e0e0;
    }

    .details div {
      padding: 10px;
      background: #f9f9f9;
      border-radius: 8px;
      font-size: 14px;
      color: #666;
    }

    .loading {
      font-size: 24px;
      color: #667eea;
      text-align: center;
    }

    .error {
      padding: 20px;
      background: #fee;
      border: 2px solid #fcc;
      border-radius: 10px;
      color: #c33;
      text-align: center;
      font-size: 16px;
    }

    .validation-error {
      padding: 10px 15px;
      background: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 8px;
      color: #856404;
      font-size: 14px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>‚õÖ –ü–æ–≥–æ–¥–∞</h1>

    <div class="search-box">
      <input
        type="text"
        id="city-input"
        placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥..."
        autocomplete="off"
      />
      <button id="search-btn">–ù–∞–π—Ç–∏</button>
    </div>

    <div id="validation-message"></div>

    <div class="controls">
      <button class="unit-toggle" id="unit-toggle">¬∞C / ¬∞F</button>
      <div class="cache-stats" id="cache-stats">–ö—ç—à: 0 –≥–æ—Ä–æ–¥–æ–≤</div>
    </div>

    <div id="weather">
      <p style="color: #999;">–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞</p>
    </div>
  </div>

  <script type="module" src="/src/app.ts"></script>
</body>
</html>
```

---

### –ó–∞–¥–∞–Ω–∏—è

**1. –û–±–Ω–æ–≤–∏ `src/app.ts` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–π –≤—Å–µ –º–æ–¥—É–ª–∏:**

   - **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π —Ñ—É–Ω–∫—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** –∏–∑ `modules/utils/format.js`:
     - `formatTemperature`, `formatDate`, `formatWindSpeed`, `capitalizeCity`, `truncateDescription`

   - **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π –≤–∞–ª–∏–¥–∞—Ü–∏—é** –∏–∑ `modules/utils/validation.js`:
     - `validateCity`, `validateTemperature`

   - **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä** –∏–∑ `modules/utils/converter.js`:
     - `convertTemperature`

**2. –û–±–Ω–æ–≤–∏ —Ñ—É–Ω–∫—Ü–∏—é `displayWeather`:**

   - **–§–æ—Ä–º–∞—Ç–∏—Ä—É–π –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞** —á–µ—Ä–µ–∑ `capitalizeCity`
   - **–§–æ—Ä–º–∞—Ç–∏—Ä—É–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É** —á–µ—Ä–µ–∑ `formatTemperature` (2 –∑–Ω–∞–∫–∞)
   - **–û–±—Ä–µ–∂—å –æ–ø–∏—Å–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ `truncateDescription` (–º–∞–∫—Å–∏–º—É–º 30 —Å–∏–º–≤–æ–ª–æ–≤)
   - **–§–æ—Ä–º–∞—Ç–∏—Ä—É–π —Å–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞** —á–µ—Ä–µ–∑ `formatWindSpeed`
   - –ï—Å–ª–∏ –µ–¥–∏–Ω–∏—Ü–∞ "fahrenheit" ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É —á–µ—Ä–µ–∑ `convertTemperature`

**3. –°–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**

   - `displayValidationError(message: string): void`
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —ç–ª–µ–º–µ–Ω—Ç–µ `#validation-message`
   - –û—á–∏—â–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã

**4. –û–±–Ω–æ–≤–∏ —Ñ—É–Ω–∫—Ü–∏—é `getWeather`:**

   - **–ü–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º** –≤–∞–ª–∏–¥–∏—Ä—É–π –≥–æ—Ä–æ–¥ —á–µ—Ä–µ–∑ `validateCity`
   - –ò—Å–ø–æ–ª—å–∑—É–π callback `onValid` –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
   - –ò—Å–ø–æ–ª—å–∑—É–π callback `onInvalid` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –û—á–∏—â–∞–π —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ

**5. –î–æ–±–∞–≤—å —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:**

   - `displayAdditionalInfo(data: WeatherData): void`
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
     - –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—á–µ—Ä–µ–∑ `formatDate`)
     - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤ –ö–µ–ª—å–≤–∏–Ω–∞—Ö
     - "–û—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫" —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**6. –î–æ–±–∞–≤—å debounce –¥–ª—è –ø–æ–∏—Å–∫–∞:**

   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π –∏–ª–∏ —Å–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é `createDebounced` –∏–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏ 3.1.6.4
   - –ü—Ä–∏–º–µ–Ω–∏ –∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫—É input —Å–æ–±—ã—Ç–∏—è (–ø–æ–∏—Å–∫ –ø—Ä–∏ –≤–≤–æ–¥–µ)
   - –ó–∞–¥–µ—Ä–∂–∫–∞: 500–º—Å

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞

–ó–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
npm run dev
```

**–ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É:**

1. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è:**
   - –í–≤–µ–¥–∏ "–ú" ‚Üí –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –í–≤–µ–¥–∏ "123" ‚Üí –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –í–≤–µ–¥–∏ "–ú–æ—Å–∫–≤–∞" ‚Üí —É—Å–ø–µ—à–Ω—ã–π –ø–æ–∏—Å–∫

2. ‚úÖ **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã
   - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å 2 –∑–Ω–∞–∫–∞–º–∏: "20.00¬∞C"
   - –°–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞ –≤ –º/—Å –∏–ª–∏ –∫–º/—á

3. ‚úÖ **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è:**
   - –ü–µ—Ä–µ–∫–ª—é—á–∏ –Ω–∞ ¬∞F ‚Üí —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è
   - –ü–µ—Ä–µ–∫–ª—é—á–∏ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ ¬∞C

4. ‚úÖ **–ö—ç—à:**
   - –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å: "üåê API" –≤ –∫–æ–Ω—Å–æ–ª–∏
   - –í—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å —Ç–æ–≥–æ –∂–µ –≥–æ—Ä–æ–¥–∞: "‚úÖ –ö—ç—à"
   - –°—á–µ—Ç—á–∏–∫ –∫—ç—à–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

5. ‚úÖ **Debounce:**
   - –ü—Ä–∏ –≤–≤–æ–¥–µ –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
   - –ü–æ–∏—Å–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 500–º—Å –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–≤–æ–¥–∞

---

### üí° –ï—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –∏–º–ø–æ—Ä—Ç—ã –≤ app.ts</summary>

```typescript
// src/app.ts
import type { AppState, WeatherData } from './types/weather.js';
import { fetchWeather } from './modules/api/weather.js';
import { getCacheStats } from './modules/utils/cache.js';

// –ù–æ–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã
import {
  formatTemperature,
  formatDate,
  formatWindSpeed,
  capitalizeCity,
  truncateDescription
} from './modules/utils/format.js';

import { validateCity } from './modules/utils/validation.js';
import { convertTemperature } from './modules/utils/converter.js';
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è displayWeather</summary>

```typescript
function displayWeather(data: WeatherData) {
  const weatherDiv = document.getElementById("weather");
  if (!weatherDiv) return;

  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≥–æ—Ä–æ–¥–∞
  const cityName = capitalizeCity(data.city);

  // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
  let displayTemp = data.temperature;
  if (appState.unit === "fahrenheit") {
    displayTemp = convertTemperature(displayTemp, "C", "F");
  }

  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
  const tempFormatted = formatTemperature(displayTemp, 2);

  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è
  const description = truncateDescription(data.description, 30);

  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ—Ç—Ä–∞
  const windFormatted = formatWindSpeed(data.windSpeed);

  weatherDiv.innerHTML = `
    <div class="weather-card">
      <h2>${cityName}</h2>
      <div class="temperature">${tempFormatted}</div>
      <div class="description">${description}</div>
      <div class="details">
        <div>–û—â—É—â–∞–µ—Ç—Å—è: ${data.feelsLike}¬∞C</div>
        <div>–í–ª–∞–∂–Ω–æ—Å—Ç—å: ${data.humidity}%</div>
        <div>–î–∞–≤–ª–µ–Ω–∏–µ: ${data.pressure} –º–º —Ä—Ç.—Å—Ç.</div>
        <div>–í–µ—Ç–µ—Ä: ${windFormatted}</div>
      </div>
    </div>
  `;
}
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ—à–∏–±–∫–∏</summary>

```typescript
function displayValidationError(message: string): void {
  const errorDiv = document.getElementById("validation-message");
  if (!errorDiv) return;

  errorDiv.innerHTML = `
    <div class="validation-error">
      ‚ö†Ô∏è ${message}
    </div>
  `;

  // –û—á–∏—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
  setTimeout(() => {
    errorDiv.innerHTML = "";
  }, 3000);
}

async function getWeather(city: string) {
  // –í–∞–ª–∏–¥–∞—Ü–∏—è –≥–æ—Ä–æ–¥–∞
  validateCity(
    city,
    async (validCity) => {
      // –£—Å–ø–µ—à–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è - –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
      const errorDiv = document.getElementById("validation-message");
      if (errorDiv) errorDiv.innerHTML = "";

      appState.status = "loading";
      appState.currentCity = validCity;
      displayLoading();

      const response = await fetchWeather(validCity);

      if (response.status === 200 && 'data' in response) {
        appState.status = "success";
        appState.weatherData = response.data.current;
        displayWeather(response.data.current);
      } else if ('error' in response) {
        appState.status = "error";
        appState.error = response.message;
        displayError(response.message);
      }

      updateCacheStats();
    },
    (error) => {
      // –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
      displayValidationError(error);
    }
  );
}
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: debounce –¥–ª—è input</summary>

```typescript
// –§—É–Ω–∫—Ü–∏—è debounce (–µ—Å–ª–∏ –Ω–µ —Å–æ–∑–¥–∞–ª –≤ 3.1.6.4)
function createDebounced(
  fn: (value: string) => void,
  delay: number
): (value: string) => void {
  let timeoutId: number | undefined;

  return (value: string) => {
    if (timeoutId) {
      clearTimeout(timeoutId);
    }

    timeoutId = setTimeout(() => {
      fn(value);
    }, delay);
  };
}

// –í –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
document.addEventListener("DOMContentLoaded", () => {
  const cityInput = document.getElementById("city-input") as HTMLInputElement;

  // Debounced –ø–æ–∏—Å–∫ –ø—Ä–∏ –≤–≤–æ–¥–µ
  const debouncedSearch = createDebounced((value: string) => {
    if (value.trim()) {
      getWeather(value.trim());
    }
  }, 500);

  cityInput?.addEventListener("input", (e) => {
    const target = e.target as HTMLInputElement;
    debouncedSearch(target.value);
  });

  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
});
```
</details>

---

### –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É —Ç–µ–±—è –±—É–¥–µ—Ç **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–≥–æ–¥–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —Å:

‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –¥–∞—Ç–∞, —Å–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞) <br/>
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ <br/>
‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è <br/>
‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∑–∞–ø—Ä–æ—Å–æ–≤ <br/>
‚úÖ Debounce –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ <br/>
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–æ–π –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π <br/>
‚úÖ –ü–æ–ª–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

**–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –ø—Ä–∞–∫—Ç–∏–∫ 3.1.6.1-3.1.6.4 —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ!** üéâ

---

## ‚ùå –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞ 1: Optional –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–µ—Ä–µ–¥ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
function greet(name?: string, age: number) {  // ‚ùå
  return `${name}, ${age} –ª–µ—Ç`;
}
```

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
function greet(age: number, name?: string) {  // ‚úÖ
  return name ? `${name}, ${age} –ª–µ—Ç` : `${age} –ª–µ—Ç`;
}
```

---

### –û—à–∏–±–∫–∞ 2: –ó–∞–±—ã–ª —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–æ–∑–≤—Ä–∞—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
function getTemp(city: string) {  // –í–æ–∑–≤—Ä–∞—Ç: any
  return 20;
}
```

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
function getTemp(city: string): number {  // ‚úÖ
  return 20;
}
```

---

### –û—à–∏–±–∫–∞ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
function test(a: number, b: number): number;
function test(a: number): number;
function test(a: number | string): number;  // ‚ùå –ù–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ —Å–ª—É—á–∞–∏

function test(a: number | string, b?: number): number {
  return typeof a === "number" ? a + (b || 0) : 0;
}
```

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –ü–ï–†–ï–î –æ–±—â–∏–º–∏
function test(a: number, b: number): number;
function test(a: number): number;

// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å —Å–∞–º–æ–π –æ–±—â–µ–π —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π
function test(a: number, b?: number): number {
  return a + (b || 0);
}
```

---

### –û—à–∏–±–∫–∞ 4: Rest –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
function log(...messages: string[], prefix: string) {  // ‚ùå
  console.log(prefix, ...messages);
}
```

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
function log(prefix: string, ...messages: string[]) {  // ‚úÖ
  console.log(prefix, ...messages);
}
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–∞–∑–¥–µ–ª–∞

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è —Ç–µ–º—ã —Ç—ã –¥–æ–ª–∂–µ–Ω:

- [ ] –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤–æ–∑–≤—Ä–∞—Ç —Ñ—É–Ω–∫—Ü–∏–π
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å optional –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`?`)
- [ ] –ü—Ä–∏–º–µ–Ω—è—Ç—å default –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- [ ] –†–∞–±–æ—Ç–∞—Ç—å —Å rest –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (`...`)
- [ ] –°–æ–∑–¥–∞–≤–∞—Ç—å function types
- [ ] –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å callback —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å —Ç–∏–ø–∞–º–∏
- [ ] –ü—Ä–∏–º–µ–Ω—è—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É —Ñ—É–Ω–∫—Ü–∏–π
- [ ] –ü–æ–Ω–∏–º–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É `void` –∏ `never`
- [ ] –ü—Ä–∞–≤–∏–ª—å–Ω–æ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

## üîó –†–µ—Å—É—Ä—Å—ã

**–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [Functions](https://www.typescriptlang.org/docs/handbook/2/functions.html) ‚Äî —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- [Function Overloads](https://www.typescriptlang.org/docs/handbook/2/functions.html#function-overloads) ‚Äî –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞
- [Rest Parameters](https://www.typescriptlang.org/docs/handbook/2/functions.html#rest-parameters-and-arguments) ‚Äî rest –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–°—Ç–∞—Ç—å–∏:**
- [TypeScript Function Types](https://dmitripavlutin.com/typescript-function-type/) ‚Äî —Ç–∏–ø—ã —Ñ—É–Ω–∫—Ü–∏–π

**–í–∏–¥–µ–æ**
- [–¢–∏–ø–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π –≤ TypeScript - Misha Nep](https://www.youtube.com/watch?v=cP97KKCq4eg)

---

‚è± **–í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ**: 2-3 —á–∞—Å–∞

---

**–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ç–µ–º–∞:** [3.1.5 –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã vs Type aliases](./3.1.5-–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã-vs-Type-aliases.md)

**–°–ª–µ–¥—É—é—â–∞—è —Ç–µ–º–∞:** [3.2.1 –ö–ª–∞—Å—Å—ã –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã](./3.2.1-–ö–ª–∞—Å—Å—ã-–∏-–º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã.md)

---

> ## üöÄ –£—Å–∫–æ—Ä—è–µ–º –∫–∞—Ä—å–µ—Ä–Ω—ã–π —Ä–æ—Å—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
>
> **–ú–µ–Ω—Ç–æ—Ä—Å—Ç–≤–æ –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ –¥–ª—è Fullstack-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
>
> - 7 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å
> - –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ –∫–æ–¥—É –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
> - –ú–∞–∫—Å–∏–º—É–º –ø—Ä–∞–∫—Ç–∏–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö
>
> [**–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –º–µ–Ω—Ç–æ—Ä–∞—Ö, –æ–±—É—á–µ–Ω–∏–∏ –∏ –∫–µ–π—Å–∞—Ö ‚Üí**](https://xmentors.ru/dev?utm_source=baza_js)
