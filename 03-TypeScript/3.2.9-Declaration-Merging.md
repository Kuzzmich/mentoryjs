# 3.2.9 Declaration Merging –∏ Module Augmentation

TypeScript –ø–æ–∑–≤–æ–ª—è–µ—Ç ¬´–¥–æ–ø–∏—Å—ã–≤–∞—Ç—å¬ª —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã ‚Äî –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—è –∫ —á—É–∂–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º, —Ä–∞—Å—à–∏—Ä—è—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –º–æ–¥—É–ª–∏, –æ–±–æ–≥–∞—â–∞—Ç—å `window` —Å–≤–æ–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏. –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è Declaration Merging –∏ Module Augmentation.

---

## üéØ –ß—Ç–æ —Ç—ã —É–∑–Ω–∞–µ—à—å

- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Declaration Merging –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- –ö–∞–∫ —Ä–∞—Å—à–∏—Ä—è—Ç—å —á—É–∂–∏–µ –º–æ–¥—É–ª–∏ —á–µ—Ä–µ–∑ Module Augmentation
- –ö–∞–∫ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–≤–æ–∏ —Ç–∏–ø—ã –∫ –≥–ª–æ–±–∞–ª—å–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º (`window`, `globalThis`)
- –ö–∞–∫ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`import.meta.env`)
- –ö–∞–∫ —Ä–∞—Å—à–∏—Ä—è—é—Ç —Ç–∏–ø—ã —Ä–µ–∞–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: Express, Vue, axios

---

## üìñ –¢–µ–æ—Ä–∏—è

### 1. Declaration Merging ‚Äî —Å–ª–∏—è–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

TypeScript –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ –æ–¥–Ω–æ. –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å `interface`, –Ω–æ –Ω–µ —Å `type`:

```typescript
// —Ñ–∞–π–ª a.ts
interface WeatherData {
  city: string;
  temperature: number;
}

// —Ñ–∞–π–ª b.ts ‚Äî –¥–æ–ø–æ–ª–Ω—è–µ–º —Ç–æ—Ç –∂–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
interface WeatherData {
  humidity: number;
  description: string;
}

// –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî TypeScript –≤–∏–¥–∏—Ç –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
// { city, temperature, humidity, description }
const data: WeatherData = {
  city: "–ú–æ—Å–∫–≤–∞",
  temperature: 20,
  humidity: 65,
  description: "–û–±–ª–∞—á–Ω–æ",
};
```

–≠—Ç–æ –≥–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ `interface` –æ—Ç `type alias`: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –º–æ–∂–Ω–æ ¬´–æ—Ç–∫—Ä—ã–≤–∞—Ç—å¬ª –∏ –¥–æ–ø–æ–ª–Ω—è—Ç—å, `type` ‚Äî –Ω–µ—Ç.

---

### 2. Module Augmentation ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π

–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –∏–∑ —á—É–∂–æ–≥–æ –º–æ–¥—É–ª—è (–±–∏–±–ª–∏–æ—Ç–µ–∫–∏), –Ω—É–∂–µ–Ω Module Augmentation. –î–µ–ª–∞–µ—Ç—Å—è –≤ –±–ª–æ–∫–µ `declare module`:

```typescript
// src/types/express.d.ts

// –†–∞—Å—à–∏—Ä—è–µ–º Request –∏–∑ express ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–µ user
declare module "express" {
  interface Request {
    user?: {
      id: string;
      role: "admin" | "user";
    };
  }
}

// –¢–µ–ø–µ—Ä—å –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö Express ‚Äî –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞ req.user
app.get("/profile", (req, res) => {
  const userId = req.user?.id; // ‚úÖ TypeScript –∑–Ω–∞–µ—Ç —ç—Ç–æ—Ç —Ç–∏–ø
});
```

–ü—Ä–∞–≤–∏–ª–æ: —Ñ–∞–π–ª —Å `declare module` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–º–æ–¥—É–ª–µ–º** (—Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω `import` –∏–ª–∏ `export`), –∏–Ω–∞—á–µ TypeScript –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç –µ–≥–æ –∫–∞–∫ —Å–∫—Ä–∏–ø—Ç, –∞ –Ω–µ –º–æ–¥—É–ª—å.

```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –µ—Å—Ç—å export {}
export {};

declare module "some-library" {
  interface SomeInterface {
    myField: string;
  }
}
```

---

### 3. Global Augmentation ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

–î–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `window`, `globalThis` –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `declare global`:

```typescript
// src/types/globals.d.ts
export {};

declare global {
  interface Window {
    weatherApp: {
      version: string;
      config: AppConfig;
    };
  }

  // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –±–µ–∑ window.
  const __DEV__: boolean;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
window.weatherApp.version; // ‚úÖ
if (__DEV__) console.log("dev mode");
```

---

### 4. –¢–∏–ø–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Vite-–ø—Ä–æ–µ–∫—Ç–∞—Ö `import.meta.env` —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```typescript
// src/vite-env.d.ts (–∏–ª–∏ src/types/env.d.ts)
/// <reference types="vite/client" />

interface ImportMetaEnv {
  readonly VITE_API_KEY: string;
  readonly VITE_BASE_URL: string;
  readonly VITE_TIMEOUT?: string;
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}

// –¢–µ–ø–µ—Ä—å:
const apiKey = import.meta.env.VITE_API_KEY; // ‚úÖ string, –Ω–µ any
const missing = import.meta.env.VITE_MISSING; // ‚ùå –æ—à–∏–±–∫–∞ ‚Äî —Ç–∞–∫–æ–≥–æ –Ω–µ—Ç
```

---

### 5. –°–ª–∏—è–Ω–∏–µ namespace —Å –∫–ª–∞—Å—Å–æ–º

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∫ –∫–ª–∞—Å—Å—É —á–µ—Ä–µ–∑ —Å–ª–∏—è–Ω–∏–µ namespace:

```typescript
class WeatherService {
  fetch(city: string) { /* ... */ }
}

namespace WeatherService {
  export const DEFAULT_TIMEOUT = 5000;
  export type Status = "idle" | "loading" | "error";
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
WeatherService.DEFAULT_TIMEOUT; // 5000 ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
const status: WeatherService.Status = "loading"; // —Ç–∏–ø –∏–∑ namespace
```

---

### 6. –ö–∞–∫ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö

**Vue 3** —Ä–∞—Å—à–∏—Ä—è–µ—Ç `ComponentCustomProperties` –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤:
```typescript
// –í –ø–ª–∞–≥–∏–Ω–µ:
declare module "@vue/runtime-core" {
  interface ComponentCustomProperties {
    $weather: WeatherService;
    $t: (key: string) => string;
  }
}

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ: this.$weather.fetch("–ú–æ—Å–∫–≤–∞") ‚Äî —Å —Ç–∏–ø–∞–º–∏
```

**axios** –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å—à–∏—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ –∑–∞–ø—Ä–æ—Å–∞:
```typescript
declare module "axios" {
  interface AxiosRequestConfig {
    retries?: number;
    _retry?: boolean;
  }
}
```

**Prisma** –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–≤–æ–∏ —Ç–∏–ø—ã —á–µ—Ä–µ–∑ Declaration Merging –≤ `@prisma/client`.

---

## üìä –®–ø–∞—Ä–≥–∞–ª–∫–∞

| –¢–µ—Ö–Ω–∏–∫–∞ | –°–∏–Ω—Ç–∞–∫—Å–∏—Å | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|---|---|---|
| Interface Merging | `interface Foo { ... }` –¥–≤–∞–∂–¥—ã | –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –∫ —Å–≤–æ–µ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É |
| Module Augmentation | `declare module "lib" { ... }` | –†–∞—Å—à–∏—Ä–∏—Ç—å —Ç–∏–ø—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ |
| Global Augmentation | `declare global { interface Window { ... } }` | –î–æ–±–∞–≤–∏—Ç—å –≤ `window`, `globalThis` |
| Env types | `interface ImportMetaEnv { ... }` | –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å `import.meta.env` |
| Namespace + Class | `namespace MyClass { export ... }` | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã |

---

## üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.2.9.1: Interface Merging ‚Äî —Å–æ—Å—Ç–∞–≤–Ω–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –ø–æ–≥–æ–¥—ã

**–ó–∞–¥–∞—á–∞:** –†–∞–∑–±–∏—Ç—å —Ç–∏–ø `WeatherData` –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —á–∞—Å—Ç–µ–π –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö –∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏—Ö —á–µ—Ä–µ–∑ Declaration Merging.

### –®–∞–≥–∏:

1. –°–æ–∑–¥–∞–π –±–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ `src/types/weather-base.ts`:

   ```typescript
   // –ë–∞–∑–æ–≤—ã–µ –ø–æ–ª—è ‚Äî –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ API
   export interface WeatherData {
     city: string;
     country: string;
     temperature: number;
     feelsLike: number;
     humidity: number;
     description: string;
     icon: string;
     timestamp: number;
   }
   ```

2. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `src/types/weather-forecast.ts` ‚Äî –¥–æ–ø–æ–ª–Ω–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—è–º–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞:

   ```typescript
   // –ò–º–ø–æ—Ä—Ç –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã —Ñ–∞–π–ª —Å—Ç–∞–ª –º–æ–¥—É–ª–µ–º
   import type { WeatherData } from "./weather-base";

   // TODO: –æ–±—ä—è–≤–∏ Declaration Merging –¥–ª—è WeatherData
   // –î–æ–±–∞–≤—å –ø–æ–ª—è:
   //   forecast: Array<{ day: string; min: number; max: number; icon: string }>
   //   forecastDays: number
   // –ü–æ–¥—Å–∫–∞–∑–∫–∞: declare module "./weather-base" { interface WeatherData { ... } }
   ```

3. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `src/types/weather-ui.ts` ‚Äî –¥–æ–±–∞–≤—å UI-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è:

   ```typescript
   import type { WeatherData } from "./weather-base";

   // TODO: –æ–±—ä—è–≤–∏ Declaration Merging –¥–ª—è WeatherData
   // –î–æ–±–∞–≤—å –ø–æ–ª—è:
   //   isFavorite: boolean
   //   lastViewed: Date | null
   //   displayUnit: "celsius" | "fahrenheit"
   ```

4. –°–æ–∑–¥–∞–π `src/types/index.ts` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤:

   ```typescript
   // TODO: –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π –≤—Å–µ —Ç—Ä–∏ —Ñ–∞–π–ª–∞ —Ç–∏–ø–æ–≤, —á—Ç–æ–±—ã –º–µ—Ä–∂–∏ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å
   // –†–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π WeatherData –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
   export type { WeatherData } from "./weather-base";
   // TODO: –¥–æ–±–∞–≤—å –∏–º–ø–æ—Ä—Ç—ã weather-forecast.ts –∏ weather-ui.ts
   // (–æ–Ω–∏ –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –Ω–∏—á–µ–≥–æ –Ω–æ–≤–æ–≥–æ, –Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç Declaration Merging)
   ```

5. –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `test-merging.ts`:

   ```typescript
   import type { WeatherData } from "./src/types";

   // TODO: —Å–æ–∑–¥–∞–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç WeatherData —Å–æ –í–°–ï–ú–ò –ø–æ–ª—è–º–∏
   // (–±–∞–∑–æ–≤—ã–º–∏ + –ø—Ä–æ–≥–Ω–æ–∑–∞ + UI)
   const weatherCard: WeatherData = {
     // TODO: –∑–∞–ø–æ–ª–Ω–∏ –≤—Å–µ –ø–æ–ª—è
   };

   // TypeScript –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å –ø–æ–ª–µ forecast ‚Äî –ø—Ä–æ–≤–µ—Ä—å —á–µ—Ä–µ–∑ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
   console.log(weatherCard.forecast[0].day);
   console.log(weatherCard.isFavorite);
   ```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- `WeatherData` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—è –∏–∑ –≤—Å–µ—Ö —Ç—Ä—ë—Ö —Ñ–∞–π–ª–æ–≤ –±–µ–∑ —è–≤–Ω–æ–≥–æ `extends`
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è –≤ –ª—é–±–æ–π —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –æ–±—â–∏–π —Ç–∏–ø
- `test-merging.ts` –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ 1: –°–∏–Ω—Ç–∞–∫—Å–∏—Å Declaration Merging –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –º–æ–¥—É–ª—è</summary>

```typescript
// –†–∞—Å—à–∏—Ä—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑ –¥—Ä—É–≥–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞
declare module "./weather-base" {
  interface WeatherData {
    forecast: Array<{
      day: string;
      min: number;
      max: number;
      icon: string;
    }>;
    forecastDays: number;
  }
}
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ 2: –ü–æ—á–µ–º—É –≤–∞–∂–µ–Ω import –≤ —Ñ–∞–π–ª–µ —Å –º–µ—Ä–∂–µ–º</summary>

```typescript
// –ë–ï–ó import ‚Äî —Ñ–∞–π–ª —Å—á–∏—Ç–∞–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º.
// declare module –≤ –Ω—ë–º —Å–æ–∑–¥–∞—Å—Ç –ù–û–í–´–ô –º–æ–¥—É–ª—å, –∞ –Ω–µ —Ä–∞—Å—à–∏—Ä–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π.
// –° import/export ‚Äî —Ñ–∞–π–ª —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–æ–¥—É–ª–µ–º, declare module —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏—è.

import type { WeatherData } from "./weather-base"; // –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

declare module "./weather-base" {
  interface WeatherData {
    newField: string; // ‚Üê —Ç–µ–ø–µ—Ä—å —ç—Ç–æ –ø—Ä–∞–≤–¥–∞ –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏—è
  }
}
```
</details>

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
npx tsc --noEmit
```

---

## üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.2.9.2: Module Augmentation ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ axios

**–ó–∞–¥–∞—á–∞:** –í –ø—Ä–æ–µ–∫—Ç–µ —É–∂–µ –µ—Å—Ç—å `src/modules/api/weather.ts` –Ω–∞ –Ω–∞—Ç–∏–≤–Ω–æ–º `fetch`. –ó–∞–º–µ–Ω–∏—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —Å–ª–æ–π –Ω–∞ axios —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º retry –∏ ID –∑–∞–ø—Ä–æ—Å–∞ ‚Äî –ø—Ä–∏ —ç—Ç–æ–º —Ä–∞—Å—à–∏—Ä–∏—Ç—å `AxiosRequestConfig` —Å–≤–æ–∏–º–∏ –ø–æ–ª—è–º–∏ —á–µ—Ä–µ–∑ Module Augmentation, –Ω–µ —Ç—Ä–æ–≥–∞—è –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

### –®–∞–≥–∏:

1. –£—Å—Ç–∞–Ω–æ–≤–∏ axios:

   ```bash
   npm install axios
   ```

2. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `src/types/axios.d.ts` ‚Äî —Ä–∞—Å—à–∏—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥ axios:

   ```typescript
   export {};

   declare module "axios" {
     interface AxiosRequestConfig {
       // TODO: –¥–æ–±–∞–≤—å –ø–æ–ª—è:
       //   retries?: number          ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ —Å–µ—Ç–µ–≤–æ–π –æ—à–∏–±–∫–µ
       //   _retryCount?: number      ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å—á—ë—Ç—á–∏–∫ (—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ interceptor)
       //   _requestId?: string       ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
       //   weatherCacheTtl?: number  ‚Äî TTL –∫—ç—à–∞ –¥–ª—è –ø–æ–≥–æ–¥–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–º—Å)
     }
   }
   ```

3. –°–æ–∑–¥–∞–π `src/modules/api/axiosInstance.ts` ‚Äî –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä axios:

   ```typescript
   import axios from "axios";

   export const http = axios.create({
     baseURL: import.meta.env.VITE_BASE_URL,
     timeout: 5000,
     retries: 3,            // ‚Üê –Ω–∞—à–µ –ø–æ–ª–µ –∏–∑ axios.d.ts ‚Äî TypeScript –Ω–µ —Ä—É–≥–∞–µ—Ç—Å—è
     weatherCacheTtl: 60_000,
   });

   // Interceptor –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ –æ—à–∏–±–∫–µ
   http.interceptors.response.use(
     (response) => response,
     async (error) => {
       const config = error.config;

       // TODO: –ø—Ä–æ—á–∏—Ç–∞–π config.retries ?? 0 –∏ config._retryCount ?? 0
       // –ï—Å–ª–∏ _retryCount < retries:
       //   - —É–≤–µ–ª–∏—á—å config._retryCount –Ω–∞ 1
       //   - –≤–µ—Ä–Ω–∏ http(config) ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
       // –ò–Ω–∞—á–µ ‚Äî –≤–µ—Ä–Ω–∏ Promise.reject(error)

       return Promise.reject(error);
     }
   );
   ```

4. –û–±–Ω–æ–≤–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `src/modules/api/weather.ts` ‚Äî –∑–∞–º–µ–Ω–∏ –Ω–∞—Ç–∏–≤–Ω—ã–π `fetch` –Ω–∞ `http`:

   > –§–∞–π–ª `weather.ts` —É–∂–µ —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –≤ —Ä–∞–∑–¥–µ–ª–∞—Ö 3.1.x —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `fetch`.
   > –°–µ–π—á–∞—Å –º—ã –ø–µ—Ä–µ–≤–æ–¥–∏–º –µ–≥–æ –Ω–∞ axios-–∏–Ω—Å—Ç–∞–Ω—Å, —Å–æ—Ö—Ä–∞–Ω—è—è —Ç–æ—Ç –∂–µ –≤–Ω–µ—à–Ω–∏–π API.

   ```typescript
   import { http } from "./axiosInstance";
   import type { WeatherData } from "../../types";

   // TODO: –∑–∞–º–µ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –Ω–∞ axios-–≤–µ—Ä—Å–∏—é
   // –°–æ—Ö—Ä–∞–Ω–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—É: fetchWeather(city: string): Promise<WeatherData>
   export async function fetchWeather(city: string): Promise<WeatherData> {
     // TODO: —Å–¥–µ–ª–∞–π GET —á–µ—Ä–µ–∑ http.get<WeatherData>("/weather", { params: ... })
     // –î–æ–±–∞–≤—å –≤ –∫–æ–Ω—Ñ–∏–≥ –∑–∞–ø—Ä–æ—Å–∞:
     //   _requestId: crypto.randomUUID()
     //   weatherCacheTtl: 60_000
     // –í–µ—Ä–Ω–∏ response.data
   }
   ```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- `http.create({ retries: 3, weatherCacheTtl: 60_000 })` ‚Äî –±–µ–∑ –æ—à–∏–±–æ–∫ TypeScript
- `_requestId` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∏ –≤–∏–¥–µ–Ω –≤ Network DevTools –∫–∞–∫ —á–∞—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥–∞
- Interceptor –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–µ –±–æ–ª–µ–µ `retries` —Ä–∞–∑ –ø—Ä–∏ —Å–µ—Ç–µ–≤–æ–π –æ—à–∏–±–∫–µ
- –í–Ω–µ—à–Ω–∏–π API `fetchWeather(city)` –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è ‚Äî –≤–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ 1: export {} –≤ —Ñ–∞–π–ª–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π ‚Äî –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω</summary>

```typescript
// –ë–µ–∑ export {} —Ñ–∞–π–ª —Å—á–∏—Ç–∞–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º.
// declare module "axios" {} –≤ –Ω—ë–º –ù–ï –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏—è.
// –î–æ–±–∞–≤—å –≤ –Ω–∞—á–∞–ª–æ:
export {};

declare module "axios" {
  interface AxiosRequestConfig {
    retries?: number;
    // ...
  }
}
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ 2: –ü–æ—á–µ–º—É interceptor —á–∏—Ç–∞–µ—Ç error.config, –∞ –Ω–µ error.response.config</summary>

```typescript
http.interceptors.response.use(
  (response) => response,
  async (error) => {
    // –ü—Ä–∏ —Å–µ—Ç–µ–≤–æ–π –æ—à–∏–±–∫–µ (–Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞) error.response = undefined
    // –ö–æ–Ω—Ñ–∏–≥ –∑–∞–ø—Ä–æ—Å–∞ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ error.config
    const config = error.config;
    const retries = config.retries ?? 0;
    const count = config._retryCount ?? 0;

    if (count < retries) {
      config._retryCount = count + 1;
      return http(config); // –ø–æ–≤—Ç–æ—Ä—è–µ–º —Å —Ç–µ–º –∂–µ –∫–æ–Ω—Ñ–∏–≥–æ–º
    }
    return Promise.reject(error);
  }
);
```
</details>

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
npx tsc --noEmit
```

---

## üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.2.9.3: Global Augmentation ‚Äî —Ç–∏–ø–∏–∑–∞—Ü–∏—è window –∏ env

**–ó–∞–¥–∞—á–∞:** –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Vite.

### –®–∞–≥–∏:

1. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `src/types/env.d.ts` –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

   ```typescript
   /// <reference types="vite/client" />

   interface ImportMetaEnv {
     // TODO: –æ–±—ä—è–≤–∏ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–æ–≥–æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
     //   VITE_API_KEY: string
     //   VITE_BASE_URL: string
     //   VITE_DEFAULT_CITY: string
     //   VITE_TIMEOUT: string      (—Å—Ç—Ä–æ–∫–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ —Å—Ç—Ä–æ–∫–∏)
     //   VITE_UNITS: "metric" | "imperial" | "standard"
   }

   interface ImportMeta {
     readonly env: ImportMetaEnv;
   }
   ```

2. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `src/types/globals.d.ts` –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

   ```typescript
   import type { WeatherData } from "./weather-base";

   // TODO: –æ–±—ä—è–≤–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã —á–µ—Ä–µ–∑ declare global { ... }
   // –î–æ–±–∞–≤—å –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Window:
   //   weatherApp: {
   //     version: string;
   //     buildDate: string;
   //     config: {
   //       apiKey: string;
   //       baseUrl: string;
   //       defaultCity: string;
   //       units: "metric" | "imperial" | "standard";
   //     };
   //   }
   //   __lastWeatherData: WeatherData | null;

   // –¢–∞–∫–∂–µ –æ–±—ä—è–≤–∏ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é (–±–µ–∑ window):
   //   const __APP_VERSION__: string;
   //   const __DEV__: boolean;
   ```

3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π `window.weatherApp` –≤ `src/app.ts`:

   ```typescript
   // TODO: –ü—Ä–∏—Å–≤–æ–π window.weatherApp –æ–±—ä–µ–∫—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
   // TypeScript –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É ‚Äî –Ω–∏–∫–∞–∫–æ–≥–æ as any!
   window.weatherApp = {
     version: __APP_VERSION__,
     buildDate: new Date().toISOString(),
     config: {
       // TODO: –∑–∞–ø–æ–ª–Ω–∏ –∏–∑ import.meta.env
       // TypeScript –ø–æ–¥—Å–∫–∞–∂–µ—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Äî –≤—Å–µ –ø–æ–ª—è –∏–∑ env.d.ts
     },
   };
   ```

4. –î–æ–±–∞–≤—å –≤ `vite.config.ts` –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:

   ```typescript
   import { defineConfig } from "vite";

   export default defineConfig({
     define: {
       // TODO: –¥–æ–±–∞–≤—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è __APP_VERSION__ –∏ __DEV__
       // __APP_VERSION__: JSON.stringify(process.env.npm_package_version)
       // __DEV__: mode === "development"
     },
   });
   ```

5. –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç `test-globals.ts`:

   ```typescript
   // TODO: –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ TypeScript –∑–Ω–∞–µ—Ç —Ç–∏–ø—ã –≤—Å–µ—Ö –≥–ª–æ–±–∞–ª–µ–π
   // –ü–æ–ø—Ä–æ–±—É–π window.weatherApp.config.apiKey ‚Äî –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å string
   // –ü–æ–ø—Ä–æ–±—É–π window.weatherApp.config.units ‚Äî –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å union
   // –ü–æ–ø—Ä–æ–±—É–π window.__MISSING__ ‚Äî –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ TS
   ```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- `import.meta.env.VITE_API_KEY` ‚Üí `string` (–Ω–µ `string | undefined`, –Ω–µ `any`)
- `import.meta.env.VITE_MISSING` ‚Üí –æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- `window.weatherApp.config.units` ‚Üí `"metric" | "imperial" | "standard"`
- `__DEV__` –¥–æ—Å—Ç—É–ø–µ–Ω –±–µ–∑ `window.` ‚Äî –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ 1: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ declare global</summary>

```typescript
export {}; // –∏–ª–∏ –ª—é–±–æ–π import ‚Äî —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–æ–¥—É–ª–µ–º

declare global {
  interface Window {
    weatherApp: { ... };
  }

  const __APP_VERSION__: string;
  const __DEV__: boolean;
}
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ 2: –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É interface Window –∏ var –≤ declare global</summary>

```typescript
declare global {
  // –†–∞—Å—à–∏—Ä—è–µ—Ç –æ–±—ä–µ–∫—Ç window ‚Äî –¥–æ—Å—Ç—É–ø–Ω–æ –∫–∞–∫ window.myProp
  interface Window {
    myProp: string;
  }

  // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ‚Äî –¥–æ—Å—Ç—É–ø–Ω–∞ –±–µ–∑ window. –≤ –ª—é–±–æ–º —Ñ–∞–π–ª–µ
  const myGlobal: string;
  // var –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å, const ‚Äî –Ω–µ—Ç
  var mutableGlobal: number;
}
```
</details>

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
npx tsc --noEmit
```

---

## üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.2.9.4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚Äî –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è augmentations

**–ó–∞–¥–∞—á–∞:** –°–æ–±—Ä–∞—Ç—å –≤—Å–µ –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –æ–¥–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `src/types/augmentations/` –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ TypeScript –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### –®–∞–≥–∏:

1. –†–µ–æ—Ä–≥–∞–Ω–∏–∑—É–π —Ñ–∞–π–ª—ã –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏–π:

   ```
   src/types/
   ‚îú‚îÄ‚îÄ augmentations/
   ‚îÇ   ‚îú‚îÄ‚îÄ axios.d.ts        ‚Üê –ø–µ—Ä–µ–º–µ—Å—Ç–∏ –∏–∑ src/types/
   ‚îÇ   ‚îú‚îÄ‚îÄ globals.d.ts      ‚Üê –ø–µ—Ä–µ–º–µ—Å—Ç–∏ –∏–∑ src/types/
   ‚îÇ   ‚îî‚îÄ‚îÄ env.d.ts          ‚Üê –ø–µ—Ä–µ–º–µ—Å—Ç–∏ –∏–∑ src/types/
   ‚îú‚îÄ‚îÄ weather-base.ts
   ‚îú‚îÄ‚îÄ weather-forecast.ts
   ‚îú‚îÄ‚îÄ weather-ui.ts
   ‚îî‚îÄ‚îÄ index.ts
   ```

2. –û–±–Ω–æ–≤–∏ `tsconfig.json`, —á—Ç–æ–±—ã TypeScript –≤–∏–¥–µ–ª –≤—Å–µ `.d.ts` —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

   ```json
   {
     "compilerOptions": {
       "typeRoots": ["./node_modules/@types"],
       "types": []
     },
     "include": [
       "src/**/*",
       "src/types/augmentations/**/*.d.ts"
     ]
   }
   ```

   > –û–±—ã—á–Ω–æ TypeScript –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ `.d.ts` —Ñ–∞–π–ª—ã –≤ `include` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
   > –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `src/**/*` —É–∂–µ –µ—Å—Ç—å –≤ `include`.

3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ `tsconfig.json` –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ `.d.ts` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

   ```json
   {
     "include": ["src/**/*"]
   }
   ```

   –ü–∞—Ç—Ç–µ—Ä–Ω `src/**/*` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç –∏ `.ts`, –∏ `.d.ts` —Ñ–∞–π–ª—ã ‚Äî –≤—Ä—É—á–Ω—É—é –Ω–∏—á–µ–≥–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ. –ï—Å–ª–∏ —Ñ–∞–π–ª—ã –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `augmentations/` –ª–µ–∂–∏—Ç –≤–Ω—É—Ç—Ä–∏ `src/`.

4. –°–æ–∑–¥–∞–π –∏—Ç–æ–≥–æ–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `test-augmentations.ts`:

   ```typescript
   // –ù–∞–º–µ—Ä–µ–Ω–Ω–æ –ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏–π –≤—Ä—É—á–Ω—É—é
   // TypeScript –¥–æ–ª–∂–µ–Ω –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç—å –∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ tsconfig.json

   // TODO: –ø—Ä–æ–≤–µ—Ä—å —Å–ª–µ–¥—É—é—â–∏–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è ‚Äî –≤—Å–µ –¥–æ–ª–∂–Ω—ã –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫:

   // 1. –ü–æ–ª—è Declaration Merging –≤ WeatherData
   import type { WeatherData } from "./src/types";
   const data = {} as WeatherData;
   data.forecast;       // ‚Üê –ø–æ–ª–µ –∏–∑ weather-forecast.ts
   data.isFavorite;     // ‚Üê –ø–æ–ª–µ –∏–∑ weather-ui.ts

   // 2. –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
   console.log(__APP_VERSION__); // ‚Üê –∏–∑ globals.d.ts

   // 3. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
   const key: string = import.meta.env.VITE_API_KEY; // ‚Üê –∏–∑ env.d.ts

   // 4. –ö–∞—Å—Ç–æ–º–Ω–æ–µ –ø–æ–ª–µ axios (–ø—Ä–æ–≤–µ—Ä—å —á–µ—Ä–µ–∑ import)
   import axios from "axios";
   const config: import("axios").AxiosRequestConfig = {
     retries: 3,            // ‚Üê –Ω–∞—à–µ –ø–æ–ª–µ –∏–∑ axios.d.ts
     weatherCacheTtl: 60000,
   };
   ```

5. –ó–∞–ø—É—Å—Ç–∏ —Ñ–∏–Ω–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É:

   ```bash
   npx tsc --noEmit --listFiles 2>&1 | grep augmentation
   ```

   –í—ã–≤–æ–¥ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `augmentations/`.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –í—Å–µ –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –ø–æ–¥–∫–ª—é—á–µ–Ω—ã —á–µ—Ä–µ–∑ `tsconfig.json`
- –ù–∏ –æ–¥–∏–Ω —Ñ–∞–π–ª –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –≤ –±–∏–∑–Ω–µ—Å-–∫–æ–¥–µ
- `npx tsc --noEmit` –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- –£–¥–∞–ª–µ–Ω–∏–µ –ª—é–±–æ–≥–æ —Ñ–∞–π–ª–∞ –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ 1: –ö–∞–∫ TypeScript –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç .d.ts —Ñ–∞–π–ª—ã</summary>

```typescript
// TypeScript –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç .d.ts —Ñ–∞–π–ª—ã, –µ—Å–ª–∏:
// 1. –û–Ω–∏ –ø–æ–ø–∞–¥–∞—é—Ç –ø–æ–¥ –ø–∞—Ç—Ç–µ—Ä–Ω include –≤ tsconfig.json
// 2. –ò–ª–∏ —è–≤–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –≤ files
// 3. –ò–ª–∏ —É–∫–∞–∑–∞–Ω—ã —á–µ—Ä–µ–∑ —Ç—Ä–æ–π–Ω–æ–π —Å–ª—ç—à: /// <reference path="..." />

// –¢–∏–ø–∏—á–Ω—ã–π include:
// "include": ["src/**/*"]  ‚Üê –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏ .ts, –∏ .d.ts
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ 2: –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –≤–∏–¥–∏—Ç TypeScript</summary>

```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤–∫–ª—é—á–∏–ª –≤ —Å–±–æ—Ä–∫—É:
npx tsc --noEmit --listFiles

# –¢–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ augmentations:
npx tsc --noEmit --listFiles 2>&1 | grep augment
```
</details>

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
npx tsc --noEmit
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–∞–∑–¥–µ–ª–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–∞–∫—Ç–∏–∫ —Ç—ã –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å:

- [ ] –û–±—ä—è—Å–Ω–∏—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É Interface Merging –∏ `extends`
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑ –¥—Ä—É–≥–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ `declare module "./path"`
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑ npm-–ø–∞–∫–µ—Ç–∞ —á–µ—Ä–µ–∑ `declare module "package-name"`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã –∫ `window` —á–µ—Ä–µ–∑ `declare global { interface Window { ... } }`
- [ ] –û–±—ä—è–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —á–µ—Ä–µ–∑ `declare global { const ... }`
- [ ] –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å `import.meta.env` –¥–ª—è Vite-–ø—Ä–æ–µ–∫—Ç–∞
- [ ] –û–±—ä—è—Å–Ω–∏—Ç—å, –ø–æ—á–µ–º—É `export {}` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ —Ñ–∞–π–ª–∞—Ö –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏–∏
- [ ] –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ `tsconfig.json`

---

## üîó –†–µ—Å—É—Ä—Å—ã

**–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [Declaration Merging](https://www.typescriptlang.org/docs/handbook/declaration-merging.html) ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –≥–ª–∞–≤–∞
- [Module Augmentation](https://www.typescriptlang.org/docs/handbook/declaration-merging.html#module-augmentation) ‚Äî –ø–æ–¥—Ä–∞–∑–¥–µ–ª —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- [Vite: TypeScript](https://vite.dev/guide/env-and-mode) ‚Äî env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ tsconfig –≤ Vite

**–°—Ç–∞—Ç—å–∏:**
- [TypeScript Module Augmentation](https://www.digitalocean.com/community/tutorials/typescript-module-augmentation) ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞–∑–±–æ—Ä
- [–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π TypeScript –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö JavaScript-—Ñ–∞–π–ª–æ–≤](https://blog.logto.io/ru/typescript-module-augmentation) - —Ä–∞–∑–±–æ—Ä –Ω–∞ —Ä—É—Å—Å–∫–æ–º

**–í–∏–¥–µ–æ:**
- [TypeScript –£—Ä–æ–∫–∏: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –î–µ–∫–ª–∞—Ä–∞—Ü–∏–π (Declaration Merging) - Developer in US](https://www.youtube.com/watch?v=ElBqJxxkey4)

**–°–≤—è–∑–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:**
- [Vue 3 + TypeScript Plugin Types](https://vuejs.org/guide/typescript/options-api.html#augmenting-global-properties) ‚Äî –∫–∞–∫ Vue –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏—é
- [DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped) ‚Äî –∫—Ä—É–ø–Ω–µ–π—à–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `.d.ts` —Ñ–∞–π–ª–æ–≤

---

‚è± **–í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ**: 2-3 —á–∞—Å–∞

---

**–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ç–µ–º–∞:** [3.2.8 –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –∏ Metadata](./3.2.8-–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã-–∏-Metadata.md)

**–°–ª–µ–¥—É—é—â–∞—è —Ç–µ–º–∞:** [3.2.10 –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏—è](./3.2.10-–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞.md)

---

> ## üöÄ –£—Å–∫–æ—Ä—è–µ–º –∫–∞—Ä—å–µ—Ä–Ω—ã–π —Ä–æ—Å—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
>
> **–ú–µ–Ω—Ç–æ—Ä—Å—Ç–≤–æ –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ –¥–ª—è Fullstack-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
>
> - 7 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å
> - –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ –∫–æ–¥—É –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
> - –ú–∞–∫—Å–∏–º—É–º –ø—Ä–∞–∫—Ç–∏–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö
>
> [**–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –º–µ–Ω—Ç–æ—Ä–∞—Ö, –æ–±—É—á–µ–Ω–∏–∏ –∏ –∫–µ–π—Å–∞—Ö ‚Üí**](https://xmentors.ru/dev?utm_source=baza_js)
