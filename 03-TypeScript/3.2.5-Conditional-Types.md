# 3.2.5 Conditional Types

Conditional Types (—É—Å–ª–æ–≤–Ω—ã–µ —Ç–∏–ø—ã) –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–±–∏—Ä–∞—Ç—å –æ–¥–∏–Ω —Ç–∏–ø –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ ‚Äî –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Å–ª–æ–≤–∏—è –ø—Ä—è–º–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤. –≠—Ç–æ –∫–∞–∫ —Ç–µ—Ä–Ω–∞—Ä–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä, –Ω–æ –¥–ª—è —Ç–∏–ø–æ–≤, –∞ –Ω–µ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π.

---

## üéØ –ß—Ç–æ —Ç—ã —É–∑–Ω–∞–µ—à—å

- –°–∏–Ω—Ç–∞–∫—Å–∏—Å `T extends U ? X : Y` –∏ –∫–∞–∫ –µ–≥–æ —á–∏—Ç–∞—Ç—å
- –ó–∞—á–µ–º –Ω—É–∂–Ω—ã —É—Å–ª–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –∏ –∫–æ–≥–¥–∞ –∏—Ö –ø—Ä–∏–º–µ–Ω—è—Ç—å
- –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `infer` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–∏–ø–æ–≤
- –î–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω–æ—Å—Ç—å —É—Å–ª–æ–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –Ω–∞ union
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∏ —Ü–µ–ø–æ—á–µ—á–Ω—ã–µ —É—Å–ª–æ–≤–Ω—ã–µ —Ç–∏–ø—ã
- –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ —Ç–∏–ø—ã
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –Ω–∞ —É—Å–ª–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞—Ö

---

## üìñ –¢–µ–æ—Ä–∏—è

### –ß—Ç–æ —Ç–∞–∫–æ–µ Conditional Types –∏ –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã?

–ò–Ω–æ–≥–¥–∞ —Ç–∏–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞. –ë–µ–∑ —É—Å–ª–æ–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ª–∏–±–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏, –ª–∏–±–æ —Ç–µ—Ä—è—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å:

```typescript
// ‚ùå –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∏ ‚Äî –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω–æ –∏ —Ö—Ä—É–ø–∫–æ
function process(value: string): string;
function process(value: number): number;
function process(value: string | number): string | number {
  return value;
}

// ‚úÖ Conditional Type ‚Äî –ª–∞–∫–æ–Ω–∏—á–Ω–æ –∏ —Ç–æ—á–Ω–æ
type Process<T> = T extends string ? string : number;

function process<T extends string | number>(value: T): Process<T> {
  return value as Process<T>;
}

const s = process("hello"); // s: string
const n = process(42);      // n: number
```

---

## 1. –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

```typescript
T extends U ? X : Y
```

–ß–∏—Ç–∞–µ—Ç—Å—è: ¬´–µ—Å–ª–∏ `T` —Å–æ–≤–º–µ—Å—Ç–∏–º —Å `U`, —Ç–æ —Ç–∏–ø —Ä–∞–≤–µ–Ω `X`, –∏–Ω–∞—á–µ ‚Äî `Y`¬ª.

```typescript
type IsString<T> = T extends string ? true : false;

type A = IsString<string>;  // true
type B = IsString<number>;  // false
type C = IsString<"hello">; // true ‚Äî —Å—Ç—Ä–æ–∫–æ–≤—ã–π –ª–∏—Ç–µ—Ä–∞–ª —Å–æ–≤–º–µ—Å—Ç–∏–º —Å–æ string
```

–≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ ‚Äî –Ω–∏–∫–∞–∫–æ–≥–æ –∫–æ–¥–∞ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ.

---

## 2. –†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å—Å–∏–≤–∞

```typescript
type IsArray<T> = T extends any[] ? true : false;

type A = IsArray<string[]>;  // true
type B = IsArray<number>;    // false
```

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∏–ø–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞

```typescript
type ElementType<T> = T extends (infer Item)[] ? Item : never;

type A = ElementType<string[]>;  // string
type B = ElementType<number[]>;  // number
type C = ElementType<string>;    // never ‚Äî –Ω–µ –º–∞—Å—Å–∏–≤
```

### –ù—É–∂–µ–Ω –ª–∏ Promise?

```typescript
// –¢–∏–ø, –∫–æ—Ç–æ—Ä—ã–π "—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç" Promise –∏–ª–∏ –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–∞–∫ –µ—Å—Ç—å
type Awaited<T> = T extends Promise<infer R> ? R : T;

type A = Awaited<Promise<string>>;  // string
type B = Awaited<number>;           // number
```

> `Awaited` ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Utility Type —Å TypeScript 4.5, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏–º–µ–Ω–Ω–æ –Ω–∞ —ç—Ç–æ–º –ø–∞—Ç—Ç–µ—Ä–Ω–µ.

---

## 3. –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `infer`

`infer` –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø ¬´–∏–∑–Ω—É—Ç—Ä–∏¬ª –¥—Ä—É–≥–æ–≥–æ —Ç–∏–ø–∞ –≤ –º–æ–º–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª–æ–≤–∏—è. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –æ–±—ä—è–≤–ª–µ–Ω–Ω–∞—è —á–µ—Ä–µ–∑ `infer`, –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ –≤–µ—Ç–∫–µ `X` (–∫–æ–≥–¥–∞ —É—Å–ª–æ–≤–∏–µ –∏—Å—Ç–∏–Ω–Ω–æ).

```typescript
//             ‚Üì –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: "–≤—ã—Ç–∞—â–∏ —Ç–∏–ø —ç–ª–µ–º–µ–Ω—Ç–∞"
type ElementType<T> = T extends (infer Item)[] ? Item : never;
//                                        ‚Üë –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–ª—é–±–æ–µ)
```

### –ß–∞—Å—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Å `infer`

```typescript
// –¢–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ (–∞–Ω–∞–ª–æ–≥ ReturnType<T>)
type MyReturnType<T> = T extends (...args: any[]) => infer R ? R : never;

// –¢–∏–ø –ø–µ—Ä–≤–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏
type FirstParam<T> = T extends (first: infer F, ...rest: any[]) => any ? F : never;

// –¢–∏–ø –∑–Ω–∞—á–µ–Ω–∏–π –≤ Promise
type UnwrapPromise<T> = T extends Promise<infer V> ? V : T;

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
function fetchWeather(city: string): Promise<WeatherData> { /* ... */ }

type Result = MyReturnType<typeof fetchWeather>; // Promise<WeatherData>
type Param = FirstParam<typeof fetchWeather>;    // string
```

---

## 4. –î–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ union-—Ç–∏–ø–∞—Ö

–ö–æ–≥–¥–∞ —É—Å–ª–æ–≤–Ω—ã–π —Ç–∏–ø –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ **union**, –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ **–∫–∞–∂–¥–æ–º—É** –µ–≥–æ —á–ª–µ–Ω—É ‚Äî —ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω–æ—Å—Ç—å—é:

```typescript
type IsString<T> = T extends string ? "yes" : "no";

// –û–¥–∏–Ω —Ç–∏–ø ‚Äî –æ–±—ã—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
type A = IsString<string>;          // "yes"

// Union ‚Äî —É—Å–ª–æ–≤–∏–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –∫–∞–∂–¥–æ–º—É —á–ª–µ–Ω—É
type B = IsString<string | number>; // "yes" | "no"
// –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ: IsString<string> | IsString<number>
```

–≠—Ç–æ –æ—á–µ–Ω—å –º–æ—â–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ union-—Ç–∏–ø–æ–≤:

```typescript
// –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–∏ –∏–∑ union
type OnlyStrings<T> = T extends string ? T : never;

type A = OnlyStrings<string | number | boolean>; // string
// number ‚Üí never, boolean ‚Üí never, never —É–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ union

// –£–±—Ä–∞—Ç—å null –∏ undefined (–∞–Ω–∞–ª–æ–≥ NonNullable<T>)
type RemoveNullable<T> = T extends null | undefined ? never : T;

type B = RemoveNullable<string | null | undefined>; // string
```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω–æ—Å—Ç–∏

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–≥–æ union —Ü–µ–ª–∏–∫–æ–º ‚Äî –æ–±–æ—Ä–∞—á–∏–≤–∞–π –≤ `[]`:

```typescript
type IsUnion<T> = [T] extends [string] ? "yes" : "no";

type A = IsUnion<string | number>; // "no" ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤–µ—Å—å union
type B = IsUnion<string>;          // "yes"
```

---

## 5. –í–ª–æ–∂–µ–Ω–Ω—ã–µ —É—Å–ª–æ–≤–Ω—ã–µ —Ç–∏–ø—ã

–£—Å–ª–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –º–æ–∂–Ω–æ –≤–∫–ª–∞–¥—ã–≤–∞—Ç—å ‚Äî –∫–∞–∫ —Ç–µ—Ä–Ω–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã:

```typescript
type TypeName<T> =
  T extends string  ? "string"  :
  T extends number  ? "number"  :
  T extends boolean ? "boolean" :
  T extends null    ? "null"    :
  T extends undefined ? "undefined" :
  "object";

type A = TypeName<string>;    // "string"
type B = TypeName<42>;        // "number"
type C = TypeName<null>;      // "null"
type D = TypeName<string[]>;  // "object"
```

---

## 6. –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ —Ç–∏–ø—ã

–£—Å–ª–æ–≤–Ω—ã–π —Ç–∏–ø –º–æ–∂–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Å–µ–±—è ‚Äî —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏:

```typescript
// "–†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç" –≤–ª–æ–∂–µ–Ω–Ω—ã–µ Promise –ª—é–±–æ–π –≥–ª—É–±–∏–Ω—ã
type DeepAwaited<T> =
  T extends Promise<infer Inner>
    ? DeepAwaited<Inner>  // —Ä–µ–∫—É—Ä—Å–∏—è
    : T;

type A = DeepAwaited<Promise<Promise<string>>>;  // string
type B = DeepAwaited<Promise<number>>;           // number
type C = DeepAwaited<string>;                    // string

// –°–¥–µ–ª–∞—Ç—å –≤—Å–µ –ø–æ–ª—è –æ–±—ä–µ–∫—Ç–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ readonly
type DeepReadonly<T> =
  T extends object
    ? { readonly [K in keyof T]: DeepReadonly<T[K]> }
    : T;

interface Config {
  api: {
    key: string;
    timeout: number;
  };
  units: "celsius" | "fahrenheit";
}

type FrozenConfig = DeepReadonly<Config>;
// {
//   readonly api: {
//     readonly key: string;
//     readonly timeout: number;
//   };
//   readonly units: "celsius" | "fahrenheit";
// }
```

---

## 7. –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ Conditional Types

–ú–Ω–æ–≥–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ Utility Types –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã –∏–º–µ–Ω–Ω–æ –Ω–∞ —É—Å–ª–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞—Ö:

```typescript
// NonNullable<T>
type NonNullable<T> = T extends null | undefined ? never : T;

// ReturnType<T>
type ReturnType<T> = T extends (...args: any[]) => infer R ? R : never;

// Parameters<T>
type Parameters<T> = T extends (...args: infer P) => any ? P : never;

// Exclude<T, U>
type Exclude<T, U> = T extends U ? never : T;

// Extract<T, U>
type Extract<T, U> = T extends U ? T : never;
```

---

## üìä –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

| –ü–∞—Ç—Ç–µ—Ä–Ω | –ö–æ–¥ |
|---|---|
| –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ | `T extends string ? X : Y` |
| –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞ | `T extends (infer I)[] ? I : never` |
| –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ Promise | `T extends Promise<infer V> ? V : never` |
| –ü–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä —Ñ—É–Ω–∫—Ü–∏–∏ | `T extends (f: infer F, ...r: any[]) => any ? F : never` |
| –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è union | `T extends SomeType ? T : never` |
| –û—Ç–∫–ª—é—á–∏—Ç—å –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω–æ—Å—Ç—å | `[T] extends [U] ? X : Y` |
| –†–µ–∫—É—Ä—Å–∏—è | `T extends ... ? Recursive<...> : T` |

---

## üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.2.5.1: –£—Å–ª–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è API-–æ—Ç–≤–µ—Ç–æ–≤

**–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞—Ç—å —É—Å–ª–æ–≤–Ω—ã–µ —Ç–∏–ø—ã, –∫–æ—Ç–æ—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Ñ–æ—Ä–º—É –æ—Ç–≤–µ—Ç–∞ API –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞.

### –®–∞–≥–∏:

1. –î–æ–±–∞–≤—å –≤ `src/types/weather.ts` —É—Å–ª–æ–≤–Ω—ã–µ —Ç–∏–ø—ã:

   ```typescript
   // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç Promise (–¥–æ—Å—Ç–∞—ë—Ç —Ç–∏–ø –≤–Ω—É—Ç—Ä–∏)
   export type Awaited<T> = T extends Promise<infer R> ? R : T;

   // –¢–∏–ø —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞
   export type ElementOf<T> = T extends (infer E)[] ? E : never;

   // –ï—Å–ª–∏ T ‚Äî –º–∞—Å—Å–∏–≤, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∏–ø —ç–ª–µ–º–µ–Ω—Ç–∞; –∏–Ω–∞—á–µ ‚Äî —Å–∞–º T
   export type MaybeArray<T> = T extends any[] ? ElementOf<T> : T;

   // –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –æ—Ç–≤–µ—Ç–∞: –æ–¥–∏–Ω–æ—á–Ω—ã–π –∏–ª–∏ –º–∞—Å—Å–∏–≤
   export type ApiResult<T, Multiple extends boolean> =
     Multiple extends true ? T[] : T;

   // –¢–∏–ø, –∫–æ—Ç–æ—Ä—ã–π —É–±–∏—Ä–∞–µ—Ç readonly —Å–æ –≤—Å–µ—Ö –ø–æ–ª–µ–π
   export type Mutable<T> = {
     -readonly [K in keyof T]: T[K];
   };

   // –¢–∏–ø, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏, –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî –Ω–µ—Ç
   export type RequireFields<T, K extends keyof T> =
     Omit<T, K> & Required<Pick<T, K>>;
   ```

2. –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `test-conditional-types.ts`:

   ```typescript
   import type {
     Awaited,
     ElementOf,
     ApiResult,
     Mutable,
     RequireFields,
   } from "./src/types/weather";
   import type { WeatherData } from "./src/types/weather";

   // Awaited
   type T1 = Awaited<Promise<WeatherData>>;   // WeatherData
   type T2 = Awaited<WeatherData>;             // WeatherData (–Ω–µ Promise)

   // ElementOf
   type T3 = ElementOf<WeatherData[]>;  // WeatherData
   type T4 = ElementOf<string[]>;       // string
   type T5 = ElementOf<number>;         // never

   // ApiResult
   type T6 = ApiResult<WeatherData, true>;   // WeatherData[]
   type T7 = ApiResult<WeatherData, false>;  // WeatherData

   // Mutable
   type ReadonlyWeather = Readonly<WeatherData>;
   type MutableWeather = Mutable<ReadonlyWeather>; // –í—Å–µ –ø–æ–ª—è —Å–Ω–æ–≤–∞ –∏–∑–º–µ–Ω—è–µ–º—ã

   // RequireFields
   type T8 = RequireFields<WeatherData, "city" | "temperature">;
   // city –∏ temperature ‚Äî Required, –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî –∫–∞–∫ –±—ã–ª–∏

   // –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ (–¥–µ–º–æ)
   function getResultType<T, M extends boolean>(
     value: ApiResult<T, M>
   ): string {
     return Array.isArray(value) ? "–º–∞—Å—Å–∏–≤" : "–æ–¥–∏–Ω–æ—á–Ω—ã–π";
   }

   console.log(getResultType<WeatherData, true>([]));   // "–º–∞—Å—Å–∏–≤"
   console.log(getResultType<WeatherData, false>({} as WeatherData)); // "–æ–¥–∏–Ω–æ—á–Ω—ã–π"
   ```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- `ApiResult<T, true>` –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `T[]`
- `ApiResult<T, false>` –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `T`
- `Mutable<T>` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `-readonly` (—É–±–∏—Ä–∞–µ—Ç readonly)
- `RequireFields<T, K>` –¥–æ–ª–∂–µ–Ω –æ–±—è–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–ª—è –∏–∑ `K`

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä -readonly</summary>

```typescript
// + –ø–µ—Ä–µ–¥ readonly / ? ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç
// - –ø–µ—Ä–µ–¥ readonly / ? ‚Äî —É–±–∏—Ä–∞–µ—Ç

type Mutable<T> = {
  -readonly [K in keyof T]: T[K]; // —É–±–∏—Ä–∞–µ—Ç readonly —Å–æ –≤—Å–µ—Ö –ø–æ–ª–µ–π
};

type Optional<T> = {
  [K in keyof T]?: T[K]; // –¥–æ–±–∞–≤–ª—è–µ—Ç ? –∫–æ –≤—Å–µ–º –ø–æ–ª—è–º
};

type Required<T> = {
  [K in keyof T]-?: T[K]; // —É–±–∏—Ä–∞–µ—Ç ? —Å–æ –≤—Å–µ—Ö –ø–æ–ª–µ–π
};
```
</details>

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
npm run build && node dist/test-conditional-types.js
```

---

## üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.2.5.2: `infer` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–∏–ø–æ–≤

**–ó–∞–¥–∞—á–∞:** –ù–∞–ø–∏—Å–∞—Ç—å –Ω–∞–±–æ—Ä —É—Ç–∏–ª–∏—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ `infer` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ –ø–æ–≥–æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –®–∞–≥–∏:

1. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `src/modules/utils/inferHelpers.ts`:

   ```typescript
   // –¢–∏–ø –ø–µ—Ä–≤–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏
   export type FirstParam<T extends (...args: any[]) => any> =
     T extends (first: infer F, ...rest: any[]) => any ? F : never;

   // –¢–∏–ø –≤—Ç–æ—Ä–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏
   export type SecondParam<T extends (...args: any[]) => any> =
     T extends (first: any, second: infer S, ...rest: any[]) => any ? S : never;

   // –¢–∏–ø –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏
   export type LastParam<T extends (...args: any[]) => any> =
     T extends (...args: [...infer _, infer L]) => any ? L : never;

   // Awaited ‚Äî —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç Promise –ª—é–±–æ–π –≥–ª—É–±–∏–Ω—ã
   export type DeepAwaited<T> =
     T extends Promise<infer Inner>
       ? DeepAwaited<Inner>
       : T;

   // –¢–∏–ø –∑–Ω–∞—á–µ–Ω–∏–π –æ–±—ä–µ–∫—Ç–∞ (–∞–Ω–∞–ª–æ–≥ Values<T>)
   export type ValueOf<T extends object> = T[keyof T];

   // –¢–∏–ø –∫–ª—é—á–µ–π —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ç–∏–ø–æ–º –∑–Ω–∞—á–µ–Ω–∏—è
   export type KeysOfType<T, V> = {
     [K in keyof T]: T[K] extends V ? K : never;
   }[keyof T];
   ```

2. –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `test-infer-helpers.ts`:

   ```typescript
   import type {
     FirstParam,
     SecondParam,
     LastParam,
     DeepAwaited,
     ValueOf,
     KeysOfType,
   } from "./src/modules/utils/inferHelpers";
   import type { WeatherData } from "./src/types/weather";

   // –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
   function fetchWeather(city: string, units: "metric" | "imperial"): Promise<WeatherData> {
     return Promise.resolve({} as WeatherData);
   }

   function formatTemperature(temp: number, decimals: number, unit: string): string {
     return `${temp.toFixed(decimals)}${unit}`;
   }

   // FirstParam, SecondParam, LastParam
   type P1 = FirstParam<typeof fetchWeather>;        // string
   type P2 = SecondParam<typeof fetchWeather>;       // "metric" | "imperial"
   type P3 = LastParam<typeof formatTemperature>;    // string

   // DeepAwaited
   type D1 = DeepAwaited<Promise<Promise<WeatherData>>>;  // WeatherData
   type D2 = DeepAwaited<Promise<string>>;                // string
   type D3 = DeepAwaited<number>;                         // number

   // ValueOf
   type V1 = ValueOf<WeatherData>;  // string | number (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –ø–æ–ª–µ–π)

   // KeysOfType ‚Äî –∫–ª—é—á–∏, –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö —è–≤–ª—è—é—Ç—Å—è —á–∏—Å–ª–∞–º–∏
   type NumericKeys = KeysOfType<WeatherData, number>;
   // "temperature" | "feelsLike" | "humidity" | "pressure" | "windSpeed"

   type StringKeys = KeysOfType<WeatherData, string>;
   // "city" | "country" | "description" | "icon"

   // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤ —Ä–∞–Ω—Ç–∞–π–º–µ
   console.log("‚úÖ –¢–∏–ø—ã –≤—ã–≤–µ–¥–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!");
   console.log("NumericKeys (—á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è WeatherData): temperature, feelsLike, humidity, pressure, windSpeed");
   console.log("StringKeys (—Å—Ç—Ä–æ–∫–æ–≤—ã–µ –ø–æ–ª—è WeatherData): city, country, description, icon");
   ```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- `LastParam` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç rest-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å `[...infer _, infer L]`
- `DeepAwaited` –¥–æ–ª–∂–Ω–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å `Promise<Promise<T>>`
- `KeysOfType<WeatherData, number>` –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∏–º–µ–Ω–Ω–æ —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ 1: LastParam —á–µ—Ä–µ–∑ rest –≤ infer</summary>

```typescript
export type LastParam<T extends (...args: any[]) => any> =
  T extends (...args: [...infer _, infer L]) => any ? L : never;

// [...infer _] ‚Äî "—Å—ä–µ–¥–∞–µ—Ç" –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ
// [infer L] ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä
```
</details>

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ 2: KeysOfType</summary>

```typescript
export type KeysOfType<T, V> = {
  // –ï—Å–ª–∏ —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ –∫–ª—é—á—É K —Å–æ–≤–º–µ—Å—Ç–∏–º —Å V ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º K, –∏–Ω–∞—á–µ never
  [K in keyof T]: T[K] extends V ? K : never;
}[keyof T]; // –ë–µ—Ä—ë–º –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ ‚Äî –ø–æ–ª—É—á–∞–µ–º union –∫–ª—é—á–µ–π (never —É–±–∏—Ä–∞–µ—Ç—Å—è)
```
</details>

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
npm run build && node dist/test-infer-helpers.js
```

---

## üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.2.5.3: –î–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

**–ó–∞–¥–∞—á–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω–æ—Å—Ç—å —É—Å–ª–æ–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä—É—é—â–∏—Ö —É—Ç–∏–ª–∏—Ç.

### –®–∞–≥–∏:

1. –î–æ–±–∞–≤—å –≤ `src/modules/utils/inferHelpers.ts` –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã:

   ```typescript
   // –§–∏–ª—å—Ç—Ä—É–µ—Ç union ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å F —Ç–∏–ø—ã
   export type Filter<T, F> = T extends F ? T : never;

   // –§–∏–ª—å—Ç—Ä—É–µ—Ç union ‚Äî —É–±–∏—Ä–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å F —Ç–∏–ø—ã
   export type Reject<T, F> = T extends F ? never : T;

   // –û—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–∏ –∏–∑ union
   export type OnlyStrings<T> = Filter<T, string>;

   // –û—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞ –∏–∑ union
   export type OnlyNumbers<T> = Filter<T, number>;

   // –¢–∏–ø –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∫–ª—é—á–µ–π –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (—Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è)
   export type SortableKey<T> = KeysOfType<T, number>;

   // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç union –≤ –∫–æ—Ä—Ç–µ–∂ (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö union)
   // –°–ª–æ–∂–Ω—ã–π —Ç–∏–ø ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –∫–∞–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å
   export type UnionToIntersection<U> =
     (U extends any ? (x: U) => void : never) extends (x: infer I) => void
       ? I
       : never;
   ```

2. –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `test-distributive.ts`:

   ```typescript
   import type {
     Filter,
     Reject,
     OnlyStrings,
     OnlyNumbers,
     SortableKey,
   } from "./src/modules/utils/inferHelpers";
   import type { WeatherData } from "./src/types/weather";

   // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω–æ—Å—Ç–∏
   type Status = "idle" | "loading" | "success" | "error";

   type ActiveStatus = Filter<Status, "loading" | "success">;
   // "loading" | "success"

   type InactiveStatus = Reject<Status, "loading" | "success">;
   // "idle" | "error"

   // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤
   type Mixed = string | number | boolean | null | undefined;
   type Strings = OnlyStrings<Mixed>; // string
   type Numbers = OnlyNumbers<Mixed>; // number

   // –ü–æ–ª—è WeatherData, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
   type SortableWeatherKey = SortableKey<WeatherData>;
   // "temperature" | "feelsLike" | "humidity" | "pressure" | "windSpeed"

   // –ò—Å–ø–æ–ª—å–∑—É–π SortableKey –≤ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
   function sortCities(
     cities: WeatherData[],
     by: SortableKey<WeatherData>
   ): WeatherData[] {
     return [...cities].sort((a, b) => (a[by] as number) - (b[by] as number));
   }

   // –¢–µ—Å—Ç
   const cities: WeatherData[] = [
     { city: "–ú–æ—Å–∫–≤–∞", temperature: 5, feelsLike: 3, humidity: 80,
       pressure: 1013, windSpeed: 3.5, description: "–æ–±–ª–∞—á–Ω–æ", icon: "04d", country: "RU" },
     { city: "–°–æ—á–∏", temperature: 15, feelsLike: 14, humidity: 70,
       pressure: 1015, windSpeed: 2.0, description: "—è—Å–Ω–æ", icon: "01d", country: "RU" },
     { city: "–ö–∞–∑–∞–Ω—å", temperature: 2, feelsLike: -1, humidity: 85,
       pressure: 1010, windSpeed: 5.0, description: "—Å–Ω–µ–≥", icon: "13d", country: "RU" },
   ];

   const byTemp = sortCities(cities, "temperature");
   console.log("–ü–æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ:", byTemp.map(c => `${c.city}: ${c.temperature}¬∞C`));

   const byWind = sortCities(cities, "windSpeed");
   console.log("–ü–æ –≤–µ—Ç—Ä—É:", byWind.map(c => `${c.city}: ${c.windSpeed}–º/—Å`));

   // sortCities(cities, "city"); // ‚ùå TypeScript Error ‚Äî "city" –Ω–µ —á–∏—Å–ª–æ–≤–æ–π –∫–ª—é—á
   ```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- `Filter<Status, "loading" | "success">` –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å `"loading" | "success"`
- `SortableKey<WeatherData>` –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è
- TypeScript –¥–æ–ª–∂–µ–Ω –∑–∞–ø—Ä–µ—â–∞—Ç—å –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∫–ª—é—á–∏ –≤ `sortCities`

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Filter</summary>

```typescript
type Filter<T, F> = T extends F ? T : never;

// –ü—Ä–∏ union TypeScript –ø—Ä–∏–º–µ–Ω—è–µ—Ç —É—Å–ª–æ–≤–∏–µ –∫ –∫–∞–∂–¥–æ–º—É —á–ª–µ–Ω—É:
// Filter<"idle" | "loading" | "success", "loading" | "success">
// = Filter<"idle", ...> | Filter<"loading", ...> | Filter<"success", ...>
// = never | "loading" | "success"
// = "loading" | "success"  ‚Üê never —É–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ union –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```
</details>

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
npm run build && node dist/test-distributive.js
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ü–æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ: [ '–ö–∞–∑–∞–Ω—å: 2¬∞C', '–ú–æ—Å–∫–≤–∞: 5¬∞C', '–°–æ—á–∏: 15¬∞C' ]
–ü–æ –≤–µ—Ç—Ä—É: [ '–°–æ—á–∏: 2–º/—Å', '–ú–æ—Å–∫–≤–∞: 3.5–º/—Å', '–ö–∞–∑–∞–Ω—å: 5–º/—Å' ]
```

---

## üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞ 3.2.5.4: –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –≥–ª—É–±–æ–∫–æ–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏

**–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞—Ç—å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –≥–ª—É–±–æ–∫–æ–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–ª–æ–∂–Ω—ã—Ö –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.

### –®–∞–≥–∏:

1. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `src/modules/utils/deepTypes.ts`:

   ```typescript
   // –ì–ª—É–±–æ–∫–∏–π Partial ‚Äî –¥–µ–ª–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
   export type DeepPartial<T> =
     T extends object
       ? { [K in keyof T]?: DeepPartial<T[K]> }
       : T;

   // –ì–ª—É–±–æ–∫–∏–π Readonly ‚Äî –¥–µ–ª–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è readonly —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
   export type DeepReadonly<T> =
     T extends object
       ? { readonly [K in keyof T]: DeepReadonly<T[K]> }
       : T;

   // –ì–ª—É–±–æ–∫–∏–π Required ‚Äî –¥–µ–ª–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
   export type DeepRequired<T> =
     T extends object
       ? { [K in keyof T]-?: DeepRequired<T[K]> }
       : T;

   // "–†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç" –º–∞—Å—Å–∏–≤—ã –∏ Promise –ª—é–±–æ–π –≥–ª—É–±–∏–Ω—ã
   export type DeepUnwrap<T> =
     T extends Promise<infer V> ? DeepUnwrap<V> :
     T extends (infer E)[]      ? DeepUnwrap<E> :
     T;

   // –ì–ª—É–±–æ–∫–æ–µ —Å–ª–∏—è–Ω–∏–µ –¥–≤—É—Ö –æ–±—ä–µ–∫—Ç–æ–≤
   export type DeepMerge<A, B> = {
     [K in keyof A | keyof B]:
       K extends keyof B
         ? K extends keyof A
           ? A[K] extends object
             ? B[K] extends object
               ? DeepMerge<A[K], B[K]>
               : B[K]
             : B[K]
           : B[K]
         : K extends keyof A
           ? A[K]
           : never;
   };
   ```

2. –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `test-deep-types.ts`:

   ```typescript
   import type { DeepPartial, DeepReadonly, DeepRequired, DeepUnwrap, DeepMerge } from "./src/modules/utils/deepTypes";
   import type { WeatherData } from "./src/types/weather";

   // –í–ª–æ–∂–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞
   interface AppConfig {
     api: {
       key: string;
       timeout: number;
       retries: number;
     };
     cache: {
       ttl: number;
       maxSize: number;
     };
     ui: {
       units: "celsius" | "fahrenheit";
       lang: string;
     };
   }

   // DeepPartial ‚Äî –≤—Å–µ –ø–æ–ª—è –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
   type PartialConfig = DeepPartial<AppConfig>;
   const partialUpdate: PartialConfig = {
     api: { timeout: 3000 },  // ‚úÖ key –∏ retries –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
     // cache –∏ ui —Ç–æ–∂–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
   };

   // DeepReadonly ‚Äî –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∏ –æ–¥–Ω–æ –ø–æ–ª–µ
   type FrozenConfig = DeepReadonly<AppConfig>;
   const frozen: FrozenConfig = {
     api: { key: "abc", timeout: 5000, retries: 3 },
     cache: { ttl: 60000, maxSize: 100 },
     ui: { units: "celsius", lang: "ru" },
   };
   // frozen.api.key = "new"; // ‚ùå Cannot assign to 'key' (readonly)

   // DeepUnwrap
   type T1 = DeepUnwrap<Promise<Promise<WeatherData>>>;  // WeatherData
   type T2 = DeepUnwrap<Promise<WeatherData[]>>;         // WeatherData
   type T3 = DeepUnwrap<string>;                         // string

   // DeepMerge ‚Äî —Å–ª–∏—è–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤
   type BaseConfig = { api: { key: string; timeout: number } };
   type Override = { api: { timeout: number; retries: number } };
   type Merged = DeepMerge<BaseConfig, Override>;
   // { api: { key: string; timeout: number; retries: number } }

   console.log("‚úÖ –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ —Ç–∏–ø—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ");
   console.log("partialUpdate:", JSON.stringify(partialUpdate, null, 2));
   ```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- `DeepPartial<AppConfig>` –¥–æ–ª–∂–µ–Ω —Å–¥–µ–ª–∞—Ç—å **–≤—Å–µ** –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–æ–ª—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏
- `DeepReadonly<AppConfig>` –¥–æ–ª–∂–µ–Ω –∑–∞–ø—Ä–µ—â–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ **–ª—é–±–æ–≥–æ** –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—è
- `DeepUnwrap<Promise<Promise<T>>>` –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å `T` (–Ω–µ `Promise<T>`)

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –ü–æ—á–µ–º—É –Ω—É–∂–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ object?</summary>

```typescript
type DeepPartial<T> =
  T extends object       // ‚Üê –±–µ–∑ —ç—Ç–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∫—É—Ä—Å–∏—è —É–π–¥—ë—Ç –≤ –ø—Ä–∏–º–∏—Ç–∏–≤—ã
    ? { [K in keyof T]?: DeepPartial<T[K]> }
    : T;                 // ‚Üê —Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞, boolean ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å

// –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏:
// DeepPartial<string> –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–∑–≤–∞—Ç—å —Å–µ–±—è —Å–Ω–æ–≤–∞,
// —á—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –æ—à–∏–±–∫–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
```
</details>

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
npm run build && node dist/test-deep-types.js
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–∞–∑–¥–µ–ª–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–∞–∫—Ç–∏–∫ —Ç—ã –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å:

- [ ] –ß–∏—Ç–∞—Ç—å –∏ –ø–∏—Å–∞—Ç—å —É—Å–ª–æ–≤–Ω—ã–µ —Ç–∏–ø—ã `T extends U ? X : Y`
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `infer` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤
- [ ] –û–±—ä—è—Å–Ω—è—Ç—å –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ union-—Ç–∏–ø–∞—Ö
- [ ] –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å union —á–µ—Ä–µ–∑ `T extends F ? T : never`
- [ ] –ü–∏—Å–∞—Ç—å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ —Ç–∏–ø—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ `extends object`
- [ ] –û—Ç–∫–ª—é—á–∞—Ç—å –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ `[T] extends [U]`
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DeepPartial`, `DeepReadonly` –≤ —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ
- [ ] –ü–æ–Ω–∏–º–∞—Ç—å, –Ω–∞ —á—ë–º –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ `ReturnType`, `Awaited` –∏ –¥—Ä.

---

## üîó –†–µ—Å—É—Ä—Å—ã

**–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [Conditional Types](https://www.typescriptlang.org/docs/handbook/2/conditional-types.html) ‚Äî –ø–æ–ª–Ω–∞—è –≥–ª–∞–≤–∞
- [Inferring Within Conditional Types](https://www.typescriptlang.org/docs/handbook/2/conditional-types.html#inferring-within-conditional-types) ‚Äî infer
- [Distributive Conditional Types](https://www.typescriptlang.org/docs/handbook/2/conditional-types.html#distributive-conditional-types) ‚Äî –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω–æ—Å—Ç—å

**–°—Ç–∞—Ç—å–∏:**
- [Conditional Types in TypeScript](https://www.totaltypescript.com/books/total-typescript-essentials/designing-your-types-in-typescript#conditional-types) ‚Äî Total TypeScript
- [TypeScript infer keyword](https://blog.logrocket.com/understanding-infer-typescript/) ‚Äî –≥–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ infer

**–í–∏–¥–µ–æ:**
- [–£—Å–ª–æ–≤–Ω—ã–µ –¢–∏–ø—ã TypeScript / Infer / Conditional Types - wise.js](https://www.youtube.com/watch?v=SpQDK74vLKo)

---

‚è± **–í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ**: 3-4 —á–∞—Å–∞

---

**–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ç–µ–º–∞:** [3.2.4 Type Guards –∏ Narrowing](./3.2.4-Type-Guards-–∏-Narrowing.md)

**–°–ª–µ–¥—É—é—â–∞—è —Ç–µ–º–∞:** [3.2.6 Mapped Types](./3.2.6-Mapped-Types.md)

---

> ## üöÄ –£—Å–∫–æ—Ä—è–µ–º –∫–∞—Ä—å–µ—Ä–Ω—ã–π —Ä–æ—Å—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
>
> **–ú–µ–Ω—Ç–æ—Ä—Å—Ç–≤–æ –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ –¥–ª—è Fullstack-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
>
> - 7 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å
> - –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ –∫–æ–¥—É –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
> - –ú–∞–∫—Å–∏–º—É–º –ø—Ä–∞–∫—Ç–∏–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö
>
> [**–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –º–µ–Ω—Ç–æ—Ä–∞—Ö, –æ–±—É—á–µ–Ω–∏–∏ –∏ –∫–µ–π—Å–∞—Ö ‚Üí**](https://xmentors.ru/dev?utm_source=baza_js)
