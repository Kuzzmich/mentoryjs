# 2.2.5 –ú–æ–¥—É–ª–∏ (ES6+)

–ú–æ–¥—É–ª–∏ ‚Äî —Å–ø–æ—Å–æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —Å —è–≤–Ω—ã–º —ç–∫—Å–ø–æ—Ä—Ç–æ–º –∏ –∏–º–ø–æ—Ä—Ç–æ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏. –≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

---

## üéØ –ß—Ç–æ —Ç—ã —É–∑–Ω–∞–µ—à—å

- –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –º–æ–¥—É–ª–∏ –∏ –∫–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ–Ω–∏ —Ä–µ—à–∞—é—Ç
- –°–∏–Ω—Ç–∞–∫—Å–∏—Å `export` –∏ `import`
- Named exports vs Default exports
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç `import()`
- –†–∞–∑–ª–∏—á–∏—è CommonJS –∏ ES Modules
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞ –≤ –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

---

## üìñ –ü—Ä–æ–±–ª–µ–º–∞: –∫–æ–¥ –±–µ–∑ –º–æ–¥—É–ª–µ–π

### –î–æ –º–æ–¥—É–ª–µ–π

```html
<!DOCTYPE html>
<html>
<head>
  <script src="utils.js"></script>
  <script src="api.js"></script>
  <script src="ui.js"></script>
  <script src="app.js"></script>
</head>
<body>
  <!-- –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å -->
</body>
</html>
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. **–ì–ª–æ–±–∞–ª—å–Ω–æ–µ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ** ‚Äî –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
2. **–ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏** ‚Äî —Å–∫—Ä–∏–ø—Ç—ã –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
3. **–ù–µ—è–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** ‚Äî –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –æ—Ç —á–µ–≥–æ –∑–∞–≤–∏—Å–∏—Ç
4. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–º—ë–Ω** ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–≥—É—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞
5. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏** ‚Äî —Ç—Ä—É–¥–Ω–æ –ø–æ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞

```javascript
// utils.js
function formatDate(date) {
  return date.toLocaleDateString();
}

// api.js
// –ù–∞–¥–µ–µ—Ç—Å—è, —á—Ç–æ formatDate —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω!
function fetchData() {
  const date = formatDate(new Date());
  // ...
}
```

### –° –º–æ–¥—É–ª—è–º–∏

```javascript
// utils.js
export function formatDate(date) {
  return date.toLocaleDateString();
}

// api.js
import { formatDate } from './utils.js';

export function fetchData() {
  const date = formatDate(new Date());
  // ...
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- ‚úÖ –õ—É—á—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ Tree-shaking (—É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞)

---

## üìñ Named Exports

**Named export** ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —Ñ—É–Ω–∫—Ü–∏–π, –∫–ª–∞—Å—Å–æ–≤ –ø–æ –∏–º–µ–Ω–∏.

### –≠–∫—Å–ø–æ—Ä—Ç

```javascript
// math.js

// –°–ø–æ—Å–æ–± 1: –≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏
export const PI = 3.14159;

export function add(a, b) {
  return a + b;
}

export class Calculator {
  multiply(a, b) {
    return a * b;
  }
}

// –°–ø–æ—Å–æ–± 2: –≠–∫—Å–ø–æ—Ä—Ç –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞
const E = 2.71828;
function subtract(a, b) {
  return a - b;
}

export { E, subtract };
```

### –ò–º–ø–æ—Ä—Ç

```javascript
// app.js

// –ò–º–ø–æ—Ä—Ç –ø–æ –∏–º–µ–Ω–∏
import { PI, add } from './math.js';

console.log(PI); // 3.14159
console.log(add(2, 3)); // 5

// –ò–º–ø–æ—Ä—Ç –≤—Å–µ–≥–æ —Å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º
import { subtract as minus } from './math.js';
console.log(minus(5, 3)); // 2

// –ò–º–ø–æ—Ä—Ç –≤—Å–µ–≥–æ –≤ –æ–±—ä–µ–∫—Ç
import * as math from './math.js';
console.log(math.PI); // 3.14159
console.log(math.add(1, 2)); // 3
```

**–í–∞–∂–Ω–æ:**
- –ò–º–µ–Ω–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∏–º–µ–Ω–∞–º–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑ `as`
- –ú–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë –≤ namespace —á–µ—Ä–µ–∑ `* as name`

---

## üìñ Default Export

**Default export** ‚Äî –æ–¥–∏–Ω –æ—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Å–ø–æ—Ä—Ç –∏–∑ –º–æ–¥—É–ª—è.

### –≠–∫—Å–ø–æ—Ä—Ç

```javascript
// weather.js

// –°–ø–æ—Å–æ–± 1: Default –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏
export default class Weather {
  constructor(city) {
    this.city = city;
  }
}

// –°–ø–æ—Å–æ–± 2: Default –≤ –∫–æ–Ω—Ü–µ
class Weather {
  constructor(city) {
    this.city = city;
  }
}

export default Weather;

// –°–ø–æ—Å–æ–± 3: –ê–Ω–æ–Ω–∏–º–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
export default function(city) {
  return `Weather for ${city}`;
}
```

**–í–∞–∂–Ω–æ:** –í –º–æ–¥—É–ª–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –û–î–ò–ù default export!

### –ò–º–ø–æ—Ä—Ç

```javascript
// app.js

// –ò–º–ø–æ—Ä—Ç default (–º–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å –∫–∞–∫ —É–≥–æ–¥–Ω–æ)
import Weather from './weather.js';
import MyWeather from './weather.js'; // –¢–æ–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
import W from './weather.js'; // –ò —Ç–∞–∫ —Ç–æ–∂–µ

const weather = new Weather('Moscow');
```

---

## üìñ –ö–æ–º–±–∏–Ω–∞—Ü–∏—è Named –∏ Default

```javascript
// api.js

// Default export
export default class API {
  constructor(key) {
    this.key = key;
  }
}

// Named exports
export const API_URL = 'https://api.example.com';
export function formatResponse(data) {
  return data.results;
}
```

```javascript
// app.js

// –ò–º–ø–æ—Ä—Ç default –∏ named
import API, { API_URL, formatResponse } from './api.js';

const api = new API('my-key');
console.log(API_URL);
```

---

## üìñ –†–µ—ç–∫—Å–ø–æ—Ä—Ç

–ü–µ—Ä–µ—ç–∫—Å–ø–æ—Ä—Ç ‚Äî –∏–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç –∏–∑ –æ–¥–Ω–æ–≥–æ –º–æ–¥—É–ª—è.

```javascript
// utils/index.js

// –†–µ—ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ–≥–æ
export * from './date.js';
export * from './string.js';

// –†–µ—ç–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —ç–∫—Å–ø–æ—Ä—Ç–æ–≤
export { formatDate, parseDate } from './date.js';

// –†–µ—ç–∫—Å–ø–æ—Ä—Ç default
export { default as DateFormatter } from './dateFormatter.js';
```

```javascript
// app.js

// –ò–º–ø–æ—Ä—Ç –≤—Å–µ–≥–æ –∏–∑ –æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
import { formatDate, parseDate, uppercase } from './utils/index.js';
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ "–±–æ—á–µ–∫" (barrels) ‚Äî –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–ª—è –≥—Ä—É–ø–ø—ã –º–æ–¥—É–ª–µ–π.

---

## üìñ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç

`import()` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è Promise —Å –º–æ–¥—É–ª–µ–º.

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```javascript
// –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç (–≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è)
import { add } from './math.js';

// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ)
const math = await import('./math.js');
console.log(math.add(2, 3));
```

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

```javascript
// –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥—É–ª—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω
button.addEventListener('click', async () => {
  const { showChart } = await import('./chart.js');
  showChart(data);
});
```

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

```javascript
let translator;

if (language === 'ru') {
  translator = await import('./translators/ru.js');
} else {
  translator = await import('./translators/en.js');
}

translator.translate('hello');
```

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

```javascript
// –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç—è–∂—ë–ª—ã–π –º–æ–¥—É–ª—å —Ç–æ–ª—å–∫–æ –¥–ª—è admin
async function loadAdminPanel() {
  if (user.role === 'admin') {
    const { AdminPanel } = await import('./admin-panel.js');
    return new AdminPanel();
  }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –£–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –±–∞–Ω–¥–ª–∞
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–¥ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- –£–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

## üìñ CommonJS vs ES Modules

### CommonJS (Node.js)

```javascript
// math.js
const PI = 3.14159;

function add(a, b) {
  return a + b;
}

// –≠–∫—Å–ø–æ—Ä—Ç
module.exports = { PI, add };
// –∏–ª–∏
exports.PI = PI;
exports.add = add;
```

```javascript
// app.js

// –ò–º–ø–æ—Ä—Ç
const math = require('./math.js');
console.log(math.PI);
console.log(math.add(2, 3));

// –î–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è
const { PI, add } = require('./math.js');
```

### ES Modules (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)

```javascript
// math.js
export const PI = 3.14159;
export function add(a, b) {
  return a + b;
}
```

```javascript
// app.js
import { PI, add } from './math.js';
```

### –†–∞–∑–ª–∏—á–∏—è

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | CommonJS | ES Modules |
|---------------|----------|------------|
| –°–∏–Ω—Ç–∞–∫—Å–∏—Å | `require()`, `module.exports` | `import`, `export` |
| –ó–∞–≥—Ä—É–∑–∫–∞ | –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è |
| –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | Runtime | Compile time |
| –£—Å–ª–æ–≤–Ω—ã–π –∏–º–ø–æ—Ä—Ç | –î–∞ (–ª–µ–≥–∫–æ) | –ù–µ—Ç (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `import()`) |
| Tree-shaking | –ù–µ—Ç | –î–∞ |
| –°—Ä–µ–¥–∞ | Node.js (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ) | –ë—Ä–∞—É–∑–µ—Ä—ã + Node.js |
| –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ | –°–ª–æ–∂–Ω–æ | –õ–µ–≥–∫–æ |

**–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö:** –ò—Å–ø–æ–ª—å–∑—É–π ES Modules!

---

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### HTML

```html
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–æ–¥—É–ª–∏</title>
</head>
<body>
  <!-- –£–∫–∞–∑—ã–≤–∞–µ–º type="module" -->
  <script type="module" src="app.js"></script>

  <!-- –ò–ª–∏ inline -->
  <script type="module">
    import { greeting } from './utils.js';
    console.log(greeting('World'));
  </script>
</body>
</html>
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π strict mode
- –°–≤–æ—è –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ (–Ω–µ –≥–ª–æ–±–∞–ª—å–Ω–∞—è)
- Defer –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- CORS ‚Äî –Ω—É–∂–µ–Ω —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# Python
python -m http.server 8000

# Node.js (http-server)
npx http-server

# Node.js (live-server —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π)
npx live-server
```

---

## üå§Ô∏è –ü—Ä–∞–∫—Ç–∏–∫–∞: –ü–æ–≥–æ–¥–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ó–∞–¥–∞–Ω–∏–µ 2.2.5.1: –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

–†–µ–æ—Ä–≥–∞–Ω–∏–∑—É–π –ø–æ–≥–æ–¥–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –º–æ–¥—É–ª–∏.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:**

```
weather-app/
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ app.js          # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îú‚îÄ‚îÄ api.js      # –†–∞–±–æ—Ç–∞ —Å API
‚îÇ   ‚îú‚îÄ‚îÄ ui.js       # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ utils.js    # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```

**–°—Ç–∞—Ä—Ç–æ–≤—ã–π –∫–æ–¥:**

```html
<!-- index.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ü–æ–≥–æ–¥–∞ - –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
    }
    .weather-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    .search {
      margin-bottom: 20px;
    }
    input {
      padding: 10px;
      width: 70%;
      border: none;
      border-radius: 4px;
    }
    button {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      background: #667eea;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #5568d3;
    }
    .weather-info {
      margin-top: 20px;
    }
    .temp {
      font-size: 48px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="weather-card">
    <div class="search">
      <input type="text" id="cityInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥...">
      <button id="searchBtn">–ü–æ–∏—Å–∫</button>
    </div>
    <div id="weatherInfo" class="weather-info"></div>
  </div>

  <!-- TODO: –ü–æ–¥–∫–ª—é—á–∏ app.js –∫–∞–∫ –º–æ–¥—É–ª—å -->
  <script type="module" src="app.js"></script>
</body>
</html>
```

**–°—Ç–∞—Ä—Ç–æ–≤—ã–π –∫–æ–¥ –¥–ª—è –º–æ–¥—É–ª–µ–π:**

```javascript
// modules/utils.js

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É
 * TODO: –†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
 * –î–æ–ª–∂–Ω–∞ –æ–∫—Ä—É–≥–ª—è—Ç—å —á–∏—Å–ª–æ –∏ –¥–æ–±–∞–≤–ª—è—Ç—å ¬∞C
 */
export function formatTemp(temp) {
  // –¢–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –¥–∞—Ç—É
 * TODO: –†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã
 * –î–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∫—Ä–∞—Å–∏–≤—É—é –¥–∞—Ç—É –Ω–∞ —Ä—É—Å—Å–∫–æ–º
 */
export function formatDate(timestamp) {
  // –¢–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}

/**
 * –ü–æ–ª—É—á–∞–µ—Ç emoji –¥–ª—è —Ç–∏–ø–∞ –ø–æ–≥–æ–¥—ã
 * TODO: –†–µ–∞–ª–∏–∑—É–π –º–∞–ø–ø–∏–Ω–≥ –∫–æ–¥–æ–≤ –ø–æ–≥–æ–¥—ã –Ω–∞ emoji
 * –ö–æ–¥—ã –ø–æ–≥–æ–¥—ã: 01 (clear), 02 (few clouds), 03 (clouds),
 * 09 (rain), 10 (rain), 11 (thunderstorm), 13 (snow), 50 (mist)
 */
export function getWeatherEmoji(weatherCode) {
  // –¢–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}
```

```javascript
// modules/api.js

// TODO: –î–æ–±–∞–≤—å —Å–≤–æ–π API –∫–ª—é—á
const API_KEY = '—Ç–≤–æ–π_api_–∫–ª—é—á';
const API_URL = 'https://api.openweathermap.org/data/2.5/weather';

/**
 * –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ –¥–ª—è –≥–æ—Ä–æ–¥–∞
 * TODO: –†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–≥–æ–¥—ã
 * - –°–¥–µ–ª–∞–π fetch –∑–∞–ø—Ä–æ—Å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏: q, appid, units=metric, lang=ru
 * - –û–±—Ä–∞–±–æ—Ç–∞–π –æ—à–∏–±–∫–∏ (–≥–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω, —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏)
 * - –í–µ—Ä–Ω–∏ parsed JSON –¥–∞–Ω–Ω—ã–µ
 */
export async function fetchWeather(city) {
  // –¢–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}

/**
 * –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ–≥–æ–¥—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
 * TODO: –†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
 */
export async function fetchWeatherByCoords(lat, lon) {
  // –¢–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}
```

```javascript
// modules/ui.js

// TODO: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ utils.js
// import { ... } from './utils.js';

/**
 * –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ
 * TODO: –†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
 * - –ò—Å–ø–æ–ª—å–∑—É–π formatTemp, getWeatherEmoji –∏–∑ utils
 * - –°–æ–∑–¥–∞–π HTML —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–≥–æ–¥–µ
 * - –í—Å—Ç–∞–≤—å –≤ container —Å id="weatherInfo"
 */
export function renderWeather(data) {
  // –¢–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}

/**
 * –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É
 * TODO: –†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∫–∞–∑–∞ –æ—à–∏–±–∫–∏
 */
export function showError(message) {
  // –¢–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}

/**
 * –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É
 * TODO: –†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∫–∞–∑–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏
 */
export function showLoading() {
  // –¢–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}
```

```javascript
// app.js

// TODO: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –º–æ–¥—É–ª–µ–π
// import { ... } from './modules/api.js';
// import { ... } from './modules/ui.js';

// TODO: –î–æ–±–∞–≤—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–æ–∏—Å–∫–∞
document.getElementById('searchBtn').addEventListener('click', async () => {
  // –¢–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
  // 1. –ü–æ–ª—É—á–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ input
  // 2. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≥–æ—Ä–æ–¥ –Ω–µ –ø—É—Å—Ç–æ–π
  // 3. –ü–æ–∫–∞–∂–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
  // 4. –ó–∞–≥—Ä—É–∑–∏ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ
  // 5. –û—Ç—Ä–∏—Å—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–ª–∏ –ø–æ–∫–∞–∂–∏ –æ—à–∏–±–∫—É
});

// TODO: –î–æ–±–∞–≤—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ Enter –≤ input

// TODO: –ó–∞–≥—Ä—É–∑–∏ –ø–æ–≥–æ–¥—É –¥–ª—è –ú–æ—Å–∫–≤—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
```

<details>
<summary>üí° –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
// modules/utils.js

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É
 */
export function formatTemp(temp) {
  return Math.round(temp) + '¬∞C';
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –¥–∞—Ç—É
 */
export function formatDate(timestamp) {
  return new Date(timestamp * 1000).toLocaleDateString('ru-RU', {
    weekday: 'long',
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
}

/**
 * –ü–æ–ª—É—á–∞–µ—Ç emoji –¥–ª—è —Ç–∏–ø–∞ –ø–æ–≥–æ–¥—ã
 */
export function getWeatherEmoji(weatherCode) {
  const emojiMap = {
    '01': '‚òÄÔ∏è', // clear sky
    '02': '‚õÖ', // few clouds
    '03': '‚òÅÔ∏è', // scattered clouds
    '04': '‚òÅÔ∏è', // broken clouds
    '09': 'üåßÔ∏è', // shower rain
    '10': 'üå¶Ô∏è', // rain
    '11': '‚õàÔ∏è', // thunderstorm
    '13': '‚ùÑÔ∏è', // snow
    '50': 'üå´Ô∏è'  // mist
  };

  const code = weatherCode.slice(0, 2);
  return emojiMap[code] || 'üå§Ô∏è';
}
```

```javascript
// modules/api.js

const API_KEY = '—Ç–≤–æ–π_api_–∫–ª—é—á'; // –ü–æ–ª—É—á–∏ –Ω–∞ https://openweathermap.org/api
const API_URL = 'https://api.openweathermap.org/data/2.5/weather';

/**
 * –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ –¥–ª—è –≥–æ—Ä–æ–¥–∞
 */
export async function fetchWeather(city) {
  try {
    const response = await fetch(
      `${API_URL}?q=${city}&appid=${API_KEY}&units=metric&lang=ru`
    );

    if (!response.ok) {
      throw new Error('–ì–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω');
    }

    return await response.json();
  } catch (error) {
    throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${error.message}`);
  }
}

/**
 * –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ–≥–æ–¥—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
 */
export async function fetchWeatherByCoords(lat, lon) {
  const response = await fetch(
    `${API_URL}?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=ru`
  );

  if (!response.ok) {
    throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–≥–æ–¥—ã');
  }

  return await response.json();
}
```

```javascript
// modules/ui.js

import { formatTemp, formatDate, getWeatherEmoji } from './utils.js';

/**
 * –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ
 */
export function renderWeather(data) {
  const container = document.getElementById('weatherInfo');

  const html = `
    <div>
      <h2>${data.name}, ${data.sys.country}</h2>
      <div class="temp">
        ${getWeatherEmoji(data.weather[0].icon)} ${formatTemp(data.main.temp)}
      </div>
      <p>${data.weather[0].description}</p>
      <p>–û—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫: ${formatTemp(data.main.feels_like)}</p>
      <p>–í–ª–∞–∂–Ω–æ—Å—Ç—å: ${data.main.humidity}%</p>
      <p>–í–µ—Ç–µ—Ä: ${data.wind.speed} –º/—Å</p>
    </div>
  `;

  container.innerHTML = html;
}

/**
 * –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É
 */
export function showError(message) {
  const container = document.getElementById('weatherInfo');
  container.innerHTML = `<p style="color: #ff6b6b;">‚ùå ${message}</p>`;
}

/**
 * –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É
 */
export function showLoading() {
  const container = document.getElementById('weatherInfo');
  container.innerHTML = '<p>‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</p>';
}
```

```javascript
// app.js

import { fetchWeather } from './modules/api.js';
import { renderWeather, showError, showLoading } from './modules/ui.js';

// –ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–∞
document.getElementById('searchBtn').addEventListener('click', async () => {
  const city = document.getElementById('cityInput').value.trim();

  if (!city) {
    showError('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞');
    return;
  }

  showLoading();

  try {
    const data = await fetchWeather(city);
    renderWeather(data);
  } catch (error) {
    showError(error.message);
  }
});

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≥–æ–¥—ã –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Enter
document.getElementById('cityInput').addEventListener('keypress', (e) => {
  if (e.key === 'Enter') {
    document.getElementById('searchBtn').click();
  }
});

// –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–≥–æ–¥—É –¥–ª—è –ú–æ—Å–∫–≤—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
(async () => {
  try {
    const data = await fetchWeather('Moscow');
    renderWeather(data);
  } catch (error) {
    console.error(error);
  }
})();
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- ‚úÖ –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É
- ‚úÖ –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ import/export
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

</details>

---

### –ó–∞–¥–∞–Ω–∏–µ 2.2.5.2: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç —Ç–µ–º—ã

–î–æ–±–∞–≤—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π –∫ –ø–æ–≥–æ–¥–Ω–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∏–∑ –∑–∞–¥–∞–Ω–∏—è 2.2.5.1.

**–ó–∞–¥–∞—á–∞:** –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ç–µ–º—ã –∑–∞–≥—Ä—É–∂–∞–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π CSS-–º–æ–¥—É–ª—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å –ø–æ–º–æ—â—å—é `import()`.

**–°—Ç–∞—Ä—Ç–æ–≤—ã–π HTML (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏–∑ 2.2.5.1):**

```html
<!-- index.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ü–æ–≥–æ–¥–∞ - –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —Ç–µ–º–∞–º–∏</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
      transition: background 0.3s ease;
    }
    .weather-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .theme-toggle {
      background: rgba(255,255,255,0.2);
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      color: white;
      font-size: 20px;
      transition: all 0.3s ease;
    }
    .theme-toggle:hover {
      background: rgba(255,255,255,0.3);
      transform: scale(1.1);
    }
    .search {
      margin-bottom: 20px;
    }
    input {
      padding: 10px;
      width: 70%;
      border: none;
      border-radius: 4px;
    }
    button {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      background: #667eea;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #5568d3;
    }
    .weather-info {
      margin-top: 20px;
    }
    .temp {
      font-size: 48px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="weather-card">
    <div class="header">
      <h1>üå§Ô∏è –ü–æ–≥–æ–¥–∞</h1>
      <button class="theme-toggle" id="themeToggle">üåô</button>
    </div>
    <div class="search">
      <input type="text" id="cityInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥...">
      <button id="searchBtn">–ü–æ–∏—Å–∫</button>
    </div>
    <div id="weatherInfo" class="weather-info"></div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
```

**–°—Ç–∞—Ä—Ç–æ–≤—ã–π –∫–æ–¥ –¥–ª—è —Ç–µ–º:**

```javascript
// themes/light.js

// –≠–∫—Å–ø–æ—Ä—Ç –æ–±—ä–µ–∫—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã
export const lightTheme = {
  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
  text: '#ffffff',
  cardBg: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
  inputBg: '#ffffff',
  inputText: '#333333'
};

// TODO: –†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã
// –î–æ–ª–∂–Ω–∞:
// - –ò–∑–º–µ–Ω—è—Ç—å body.style.background
// - –ò–∑–º–µ–Ω—è—Ç—å —Å—Ç–∏–ª–∏ .weather-card (background, color)
// - –ú–µ–Ω—è—Ç—å —Å—Ç–∏–ª–∏ input (background, color)
export function applyLightTheme() {
  // –¢–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}
```

```javascript
// themes/dark.js

// –≠–∫—Å–ø–æ—Ä—Ç –æ–±—ä–µ–∫—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã
export const darkTheme = {
  background: 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)',
  text: '#ecf0f1',
  cardBg: 'linear-gradient(135deg, #34495e 0%, #2c3e50 100%)',
  inputBg: '#2c3e50',
  inputText: '#ecf0f1'
};

// TODO: –†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã
// –î–æ–ª–∂–Ω–∞:
// - –ò–∑–º–µ–Ω—è—Ç—å body.style.background
// - –ò–∑–º–µ–Ω—è—Ç—å —Å—Ç–∏–ª–∏ .weather-card (background, color)
// - –ú–µ–Ω—è—Ç—å —Å—Ç–∏–ª–∏ input (background, color)
export function applyDarkTheme() {
  // –¢–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}
```

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π app.js:**

```javascript
// app.js

import { fetchWeather } from './modules/api.js';
import { renderWeather, showError, showLoading } from './modules/ui.js';

// TODO: –†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ —Ç–µ–º—ã
// async function switchTheme(themeName) {
//   - –ò—Å–ø–æ–ª—å–∑—É–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π import()
//   - –ó–∞–≥—Ä—É–∂–∞–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –º–æ–¥—É–ª—å —Ç–µ–º—ã
//   - –ü—Ä–∏–º–µ–Ω—è–π —Ç–µ–º—É
//   - –°–æ—Ö—Ä–∞–Ω—è–π –≤—ã–±–æ—Ä –≤ localStorage
//   - –û–±–Ω–æ–≤–ª—è–π –∏–∫–æ–Ω–∫—É –∫–Ω–æ–ø–∫–∏ (üåô –¥–ª—è —Å–≤–µ—Ç–ª–æ–π, ‚òÄÔ∏è –¥–ª—è —Ç—ë–º–Ω–æ–π)
// }

// TODO: –î–æ–±–∞–≤—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã
document.getElementById('themeToggle').addEventListener('click', () => {
  // –¢–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
});

// –ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–∞
document.getElementById('searchBtn').addEventListener('click', async () => {
  const city = document.getElementById('cityInput').value.trim();

  if (!city) {
    showError('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞');
    return;
  }

  showLoading();

  try {
    const data = await fetchWeather(city);
    renderWeather(data);
  } catch (error) {
    showError(error.message);
  }
});

// Enter –≤ input
document.getElementById('cityInput').addEventListener('keypress', (e) => {
  if (e.key === 'Enter') {
    document.getElementById('searchBtn').click();
  }
});

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≥–æ–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
(async () => {
  try {
    const data = await fetchWeather('Moscow');
    renderWeather(data);
  } catch (error) {
    console.error(error);
  }
})();

// TODO: –ó–∞–≥—Ä—É–∑–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é —Ç–µ–º—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
// const savedTheme = localStorage.getItem('theme') || 'light';
// switchTheme(savedTheme);
```

<details>
<summary>üí° –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
// themes/light.js
export const lightTheme = {
  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
  text: '#ffffff',
  cardBg: 'rgba(255, 255, 255, 0.1)',
  inputBg: '#ffffff',
  inputText: '#333333'
};

export function applyLightTheme() {
  document.body.style.background = lightTheme.background;
  const card = document.querySelector('.weather-card');
  card.style.background = lightTheme.cardBg;
  card.style.color = lightTheme.text;
}
```

```javascript
// themes/dark.js
export const darkTheme = {
  background: 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)',
  text: '#ecf0f1',
  cardBg: 'rgba(52, 73, 94, 0.8)',
  inputBg: '#2c3e50',
  inputText: '#ecf0f1'
};

export function applyDarkTheme() {
  document.body.style.background = darkTheme.background;
  const card = document.querySelector('.weather-card');
  card.style.background = darkTheme.cardBg;
  card.style.color = darkTheme.text;
}
```

```javascript
// app.js

// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç —Ç–µ–º—ã
async function switchTheme(themeName) {
  try {
    if (themeName === 'light') {
      const { applyLightTheme } = await import('./themes/light.js');
      applyLightTheme();
    } else if (themeName === 'dark') {
      const { applyDarkTheme } = await import('./themes/dark.js');
      applyDarkTheme();
    }

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±–æ—Ä
    localStorage.setItem('theme', themeName);
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–º—ã:', error);
  }
}

// –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã
document.getElementById('themeToggle').addEventListener('click', () => {
  const currentTheme = localStorage.getItem('theme') || 'light';
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  switchTheme(newTheme);
});

// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é —Ç–µ–º—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
const savedTheme = localStorage.getItem('theme') || 'light';
switchTheme(savedTheme);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞:**
- –¢–µ–º—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã
- –£–º–µ–Ω—å—à–∞–µ—Ç—Å—è —Ä–∞–∑–º–µ—Ä –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –±–∞–Ω–¥–ª–∞
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–µ–º—ã

</details>

---

### –ó–∞–¥–∞–Ω–∏–µ 2.2.5.3: –°–æ–∑–¥–∞–Ω–∏–µ "–±–æ—á–∫–∏" (barrel)

–°–æ–∑–¥–∞–π `index.js`, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –º–æ–¥—É–ª–∏.

**–ó–∞–¥–∞—á–∞:** –£–ø—Ä–æ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç—ã —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞.

<details>
<summary>üí° –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
// modules/index.js

// –†–µ—ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ api
export * from './api.js';

// –†–µ—ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ ui
export * from './ui.js';

// –†–µ—ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ utils
export * from './utils.js';
```

**–î–æ:**
```javascript
import { fetchWeather } from './modules/api.js';
import { renderWeather, showError } from './modules/ui.js';
import { formatTemp } from './modules/utils.js';
```

**–ü–æ—Å–ª–µ:**
```javascript
import {
  fetchWeather,
  renderWeather,
  showError,
  formatTemp
} from './modules/index.js';
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏–º–ø–æ—Ä—Ç–∞
- –õ–µ–≥—á–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –£–¥–æ–±–Ω–µ–µ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π

</details>

---

## üèÜ –ò—Ç–æ–≥–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ 2.2.5

**–°–æ–∑–¥–∞–π –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –º–æ–¥—É–ª—å–Ω–æ–µ –ø–æ–≥–æ–¥–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

1. **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
weather-app/
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ app.js
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ weather.js      # API –ø–æ–≥–æ–¥—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ geocoding.js    # API –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ weatherCard.js  # –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–≥–æ–¥—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forecast.js     # –ü—Ä–æ–≥–Ω–æ–∑
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ favorites.js    # –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ format.js       # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage.js      # LocalStorage
‚îÇ   ‚îî‚îÄ‚îÄ index.js            # Barrel export
‚îú‚îÄ‚îÄ themes/
‚îÇ   ‚îú‚îÄ‚îÄ light.js
‚îÇ   ‚îî‚îÄ‚îÄ dark.js
‚îî‚îÄ‚îÄ styles/
    ‚îî‚îÄ‚îÄ main.css
```

2. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü–æ–∏—Å–∫ –ø–æ–≥–æ–¥—ã –ø–æ –≥–æ—Ä–æ–¥—É
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –ø–æ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç)
- –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ (localStorage)
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

3. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ES Modules
- Named exports –¥–ª—è —É—Ç–∏–ª–∏—Ç
- Default exports –¥–ª—è –∫–ª–∞—Å—Å–æ–≤
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –º–æ–¥—É–ª–µ–π
- –†–µ—ç–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ index.js

**–°—Ç–∞—Ä—Ç–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤ —Å–ø–æ–π–ª–µ—Ä–µ:**

<details>
<summary>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏</summary>

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏:

**modules/api/weather.js**
```javascript
const API_KEY = '—Ç–≤–æ–π_–∫–ª—é—á';
const API_URL = 'https://api.openweathermap.org/data/2.5';

export async function getCurrentWeather(city) {
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
}

export async function getForecast(city) {
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è 5-–¥–Ω–µ–≤–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞
}
```

**modules/api/geocoding.js**
```javascript
export async function getLocationByCoords(lat, lon) {
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
}

export function getUserLocation() {
  return new Promise((resolve, reject) => {
    navigator.geolocation.getCurrentPosition(
      position => resolve({
        lat: position.coords.latitude,
        lon: position.coords.longitude
      }),
      error => reject(error)
    );
  });
}
```

**modules/utils/storage.js**
```javascript
export function saveFavorites(cities) {
  localStorage.setItem('favorites', JSON.stringify(cities));
}

export function getFavorites() {
  const data = localStorage.getItem('favorites');
  return data ? JSON.parse(data) : [];
}

export function addFavorite(city) {
  const favorites = getFavorites();
  if (!favorites.includes(city)) {
    favorites.push(city);
    saveFavorites(favorites);
  }
}

export function removeFavorite(city) {
  let favorites = getFavorites();
  favorites = favorites.filter(c => c !== city);
  saveFavorites(favorites);
}
```

**modules/ui/weatherCard.js**
```javascript
import { formatTemp, getWeatherEmoji } from '../utils/format.js';

export function renderCurrentWeather(data, container) {
  // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥–æ–π
}
```

**app.js - –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª**
```javascript
import {
  getCurrentWeather,
  getUserLocation
} from './modules/index.js';

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
async function init() {
  setupEventListeners();
  await loadDefaultWeather();
}

// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞
async function showForecast(city) {
  const { renderForecast } = await import('./modules/ui/forecast.js');
  const data = await getForecast(city);
  renderForecast(data);
}

init();
```

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ–∏—á–∏:

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤:**
```javascript
const cache = new Map();

export async function getCachedWeather(city) {
  if (cache.has(city)) {
    const { data, timestamp } = cache.get(city);
    const now = Date.now();

    // –ö—ç—à –≤–∞–ª–∏–¥–µ–Ω 10 –º–∏–Ω—É—Ç
    if (now - timestamp < 10 * 60 * 1000) {
      return data;
    }
  }

  const data = await getCurrentWeather(city);
  cache.set(city, { data, timestamp: Date.now() });
  return data;
}
```

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
```javascript
export class WeatherError extends Error {
  constructor(message, code) {
    super(message);
    this.code = code;
    this.name = 'WeatherError';
  }
}
```

</details>

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è —ç—Ç–æ–π —Ç–µ–º—ã —Ç—ã –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å:

- [ ] –û–±—ä—è—Å–Ω–∏—Ç—å, –∑–∞—á–µ–º –Ω—É–∂–Ω—ã –º–æ–¥—É–ª–∏
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `export` –∏ `import`
- [ ] –ü–æ–Ω–∏–º–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É named –∏ default exports
- [ ] –°–æ–∑–¥–∞–≤–∞—Ç—å barrel exports —á–µ—Ä–µ–∑ index.js
- [ ] –ü—Ä–∏–º–µ–Ω—è—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- [ ] –û–±—ä—è—Å–Ω–∏—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É CommonJS –∏ ES Modules
- [ ] –û—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –∫–æ–¥ –≤ –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

---

## üîó –†–µ—Å—É—Ä—Å—ã

**–°—Ç–∞—Ç—å–∏:**
- [MDN: JavaScript modules](https://developer.mozilla.org/ru/docs/Web/JavaScript/Guide/Modules)
- [Modules ‚Äî JavaScript.ru](https://learn.javascript.ru/modules-intro)
- [ES6 Modules ‚Äî explore-es6](https://exploringjs.com/es6/ch_modules.html)

**–í–∏–¥–µ–æ:**
- [ES6 Modules ‚Äî –í–ª–∞–¥–∏–ª–µ–Ω –ú–∏–Ω–∏–Ω](https://www.youtube.com/watch?v=qgRUr-YUk1Q)
- [JavaScript Modules ‚Äî Web Dev Simplified](https://www.youtube.com/watch?v=cRHQNNcYf6s)

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- [Webpack](https://webpack.js.org/) ‚Äî –±–∞–Ω–¥–ª–µ—Ä –º–æ–¥—É–ª–µ–π
- [Vite](https://vitejs.dev/) ‚Äî –±—ã—Å—Ç—Ä—ã–π —Å–±–æ—Ä—â–∏–∫ —Å –Ω–∞—Ç–∏–≤–Ω—ã–º–∏ ES –º–æ–¥—É–ª—è–º–∏
- [Rollup](https://rollupjs.org/) ‚Äî –±–∞–Ω–¥–ª–µ—Ä –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫

---

‚è± **–í—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ**: 3-4 —á–∞—Å–∞

---

**–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ç–µ–º–∞:** [2.2.5 Event Loop](./2.2.5-Event-Loop.md)

**–°–ª–µ–¥—É—é—â–∞—è —Ç–µ–º–∞:** [2.2.7 –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](./2.2.7-–û–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫.md)
